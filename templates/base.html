{% load mi_tags %}<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<title>{% block title %}Math Insight{% endblock %}</title>
	<!-- JavaScript Detection -->
	<script>document.documentElement.className += " js";</script>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link href="{{ STATIC_URL }}css/mistyle.css" rel="stylesheet" type="text/css"/>
<!--[if lte IE 7]>
<link href="{{ STATIC_URL }}css/iehacks.min.css" rel="stylesheet" type="text/css" />
<![endif]-->

<!--[if lt IE 9]>
<script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
<![endif]-->
<script src="{{ STATIC_URL }}js/jquery-latest.js" type="text/javascript"></script>
{% block extrastyle %}{% endblock %}

<script type="text/x-mathjax-config">
  if (MathJax.Hub.Browser.isFirefox) {
  MathJax.Hub.Register.MessageHook("Renderer Selected",function  
  (message) {
  var warning = document.getElementById("MJ_PrintWarning");
  warning.style.display = (message[1] === "SVG" ? "none" : "");
  });
  MathJax.Hub.Queue(function () {
  if (MathJax.Hub.config.menuSettings.renderer !== "SVG") {
  document.getElementById("MJ_PrintWarning").style.display = "";
  }
  });
  }
</script>
<script type="text/javascript" src="/MathJax/MathJax.js?config=TeX-AMS_HTML-full,local/midefault{% if notation_config %},local/{{notation_config }}{%endif%}"></script>

{% comment %}<script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS_HTML-full,http://localhost/MathJax/config/local/midefault{% if notation_config %},http://localhost/MathJax/config/local/{{notation_config }}{%endif%}"></script>
{% endcomment %}
{% block noanalytics %}{% if not noanalytics %}<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-28169224-1']);
  _gaq.push(['_trackPageview']);
  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>{% endif %}{% endblock%}
</head>
<body>
<ul class="ym-skiplinks">
	{% block nopagenavsl %}<li><a class="ym-skip" href="#pagenav">Skip to navigation (Press Enter)</a></li>{% endblock%}
	<li><a class="ym-skip" href="#main">Skip to main content (Press Enter)</a></li>
</ul>
<nav id="sitenav" role="navigation">
  <div class="ym-wrapper">
    <div class="ym-wbox">
      <div class="mnav">
	<ul class="ym-grid ym-equalize linearize-level-2">
	  <li class="ym-g10 ym-gl"><a href="{% url 'mathinsight-home' %}">Home</a></li>
	  <li class="ym-g10 ym-gl"><a href="{% url 'mithreads-list' %}">Threads</a></li>
	  <li class="ym-g10 ym-gl"><a href="{% url 'mi-index' 'general' %}">Index</a></li>
	  <li class="ym-g10 ym-gl"><a href="{% url 'mi-about' %}">About</a></li>
	  <li class="ym-g50 ym-gl"><div id="search_box"><form class="ym-searchform" action="{% url 'haystack_search' %}#search" method="get">
	  <input id="id_q_a" type="search" name="q" size="18" class="ym-searchfield" placeholder="Search Math Insight..."  />
	  <input class="ym-searchbutton" type="submit" value="Search" />
	</form>
      </div></li>
	</ul>
      </div>
    </div>
  </div>
</nav>


<header>
  <div class="ym-wrapper">
    <div class="ym-wbox">
      <h1>Math Insight</h1>
    </div>
  </div>
</header>

{% block nopagenav %}
<nav id="pagenav">
<div id="menu-icon">Page Navigation</div>
  <div class="ym-wrapper">
    <ul id="unav">
 	{% block pagenav %}
       <li><a href="#sitenav">Top</a>
        </li>
	{% endblock %}
      </ul>
  </div>
      <input type="button" value="x" class="unstick" onclick="unstick(document.getElementById('pagenav'))"/>
</nav>
{% endblock %}
<div id="breadcrumbs_login">
  <div class="ym-wrapper">
    <div class="ym-wbox" style="padding-top:0; padding-bottom: 0;">
      <div class="ym-grid linearize-level-1">
	<div class="ym-g66 ym-gl">
	  <div class="ym-gbox-left">
	    {% if user.courseuser.selected_course %}<a href="{% url 'mic-coursemain' %}">{{user.courseuser.selected_course}}</a> {% block coursebreadcrumb %}{%endblock%}{%endif%}
	  </div>
	</div>
	<div class="ym-g33 ym-gr"> 
	  <div class="ym-gbox-left" style="text-align: right;">
	    {% if user.is_authenticated %}logged in as {{ user}}  (<a href="{% url 'mi-logout' %}">log out</a>){%else%}<a href="{% url 'mi-login'%}">log in</a>{%endif%}
	  </div>
	</div>
      </div>
    </div>
  </div>
</div>
<div id="main">
  <div class="ym-wrapper">
    <div class="ym-wbox">
      {% block main_columns %}
      <div id="MJ_PrintWarning" style="display: none">When printing from Firefox, select the SVG renderer in the MathJax contextual menu (right click any math equation) for better printing results</div>
      {% block main_heading %}{% endblock%}
      <div class="ym-column linearize-level-1">
	<article id="main_content" class="ym-col1">
	  <div class="ym-cbox">
	    {% block content %}{% endblock %}
	  </div>
	</article>
	<div class="ym-col3">
	  <div class="ym-cbox">
	   {% block rightcolumn %}{% endblock %}
 	  </div>
	</div>
      </div>
      {% endblock %}
      {% block nolinksection %}
      <a id="linksection" class="anchor"></a>
      <div class="ym-grid linearize-level-1">
	<div class="ym-g66 ym-gl">
	  <div class="ym-grid linearize-level-2">
	    <div class="ym-g50 ym-gl">
	      <div class="ym-gbox-left">
		{% block linksectionA %}{% endblock %}
	      </div>
	    </div>
	    <div class="ym-g50 ym-gr">
	      <div class="ym-gbox">
		{% block linksectionB %}{% endblock %}
	      </div>
	    </div>
	  </div>
	</div>
	<div class="ym-g33 ym-gr">
	  <div class="ym-gbox-right secondary">
	    {% block linksectionC %}{% endblock %}
	  </div>
	</div>
      </div>
      {% endblock%}
    </div>
  </div>
</div>
<footer>
  <div class="ym-wrapper">
    <div class="ym-wbox">
      {% block footer %}{% endblock %}
    </div>
  </div>
</footer>

<!-- full skip link functionality in webkit browsers -->
<script src="{{ STATIC_URL }}js/yaml-focusfix.js"></script>
<script type="text/javascript">
  jQuery(document).ready(function($){
    /* toggle nav */
    $("#menu-icon").click(function(){
	$("#unav").slideToggle();
    });
    $("#unav").click(function(){
	$("#unav").slideToggle();
    });
});
</script>
<script src="{{ STATIC_URL }}js/jquery.sticky.js"></script>
<script>
  $(document).ready(function(){
    $("#pagenav").sticky({topSpacing:0});
  });
</script>
<script type="text/javascript">
  function unstick(obj)
  {
  obj.style.position="static";
  }
</script>
{% accumulated_javascript %}

</body>
</html>
