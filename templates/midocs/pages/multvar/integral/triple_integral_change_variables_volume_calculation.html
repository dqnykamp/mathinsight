{% extends "midocs/page_base.html" %}{% load mi_tags %}{% block content %}
{% index_entry "triple integral" "change variables"%}
{% index_entry "change variables" "triple integrals"%}
{% title "Volume calculation for changing variables in triple integrals" %}
{% description "A derivation of how a mapping that changes variables in triple integrals transforms volume." %}

<p>To {% intlink triple_integral_change_variables_introduction %}change variables{%endintlink%} 
in a triple integral such as
$$\iiint_\dlv f(x,y,z) dV,$$
one uses a mapping of the form
$(x,y,z) = \cvarf(\cvarfv,\cvarsv,\cvartv)$.  This function maps some region $\dlv^*$
in the $(\cvarfv,\cvarsv,\cvartv)$ coordinates into the original region $\dlv$
of the integral in $(x,y,z)$ coordinates.</p>

<p>In the {%intlink triple_integral_change_variables_story %}triple integral change variable story{%endintlink%}, we illustrate, using the below applet involving an electrode tip, how the change of variable map $\cvarf$ transforms volume as it stretches or compresses different parts of $\dlv^*$ to map it onto $\dlv$.</p> 


{% boxedapplet "electrode_tip_change_variables_volume" %}

<p>The original integral is expressed in terms of the volume factor $dV$ which measures volume in the region $\dlv$, i.e., volume in terms of the original variables $x$, $y$, and $z$.  In order to change variables and rewrite the integral in terms of the new variables $\cvarfv$, $\cvarsv$, and $\cvartv$, we need to make sure that we are still measuring area in the original region $\dlv$ even though we are going to compute the integral over a new region $\dlv^*$ in the new variables.</p>

<p>To calculate how $\cvarf$ transforms volume, we chop up the region
$\dlv^*$ into small boxes of width $\Delta\cvarfv$, depth $\Delta\cvarsv$, and height $\Delta\cvartv$.
The following applet illustrates how one of these boxes with lower
left corner $(\cvarfv,\cvarsv,\cvartv)$ might be mapped by a change of variables transformation $\cvarf$ into a 
&ldquo;curvy region&rdquo; with one corner being at the point $\cvarf(\cvarfv,\cvarsv,\cvartv)$.
</p>

{% boxedapplet "change_variable_volume_transformation" %}

<p>The volume of the small box in $\cvarfv\cvarsv\cvartv$ space is
clearly $\Delta\cvarfv\Delta\cvarsv\Delta\cvartv$, but the volume of the 
&ldquo;curvy region&rdquo; in $xyz$ space is more difficult to calculate.
Since the volume of the &ldquo;curvy region&rdquo; is the volume of part of the region $\dlv$, it's this volme that we need to calculate the triple integral.  Our goal is to calculate an expression for the volume of the &ldquo;curvy region.&rdquo;  We'll call this volume $\Delta V$ to remind us that this volume is what the
$dV$ in the integral represents.</p>

<p>Recall that the {% intlink triple_integral_introduction %}triple integral{%endintlink%} is defined by a Riemann sum where the size of the boxes go to zero.  This means we are free to let the dimensions $\Delta\cvarfv$, $\Delta\cvarsv$, and $\Delta\cvartv$ be very small and use any approximation that is valid when they are small.  In particular, since we assume that the mapping $\cvarf$ is {% intlink differentiability_multivariable_introduction %}differentiable{%endintlink%}, we know that for a small region around the point $(\cvarfv,\cvarsv,\cvartv)$, the function $\cvarf(\cvarfv,\cvarsv,\cvartv)$ is well approximated by its {% intlink linear_approximation_multivariable %}linear approximation{%endintlink%} centered around the point $(\cvarfv,\cvarsv,\cvartv)$.  For small $\Delta\cvarfv$, $\Delta\cvarsv$, and $\Delta\cvartv$, all the points in the small box are close enough to $(\cvarfv,\cvarsv,\cvartv)$ for the linear approximation.  As we let the box edges $\Delta\cvarfv$, $\Delta\cvarsv$, and $\Delta\cvartv$ go to zero, any calculation based on the linear approximation will give the correct expression for the volume.</p>


<p>Since {% intlink linear_transformation_definition_euclidean %}linear transformations{%endintlink%} in three dimensions {% intlink linear_transformations_map_parallelograms_parallelepipeds map3D %}map parallelepipeds onto parallelepipeds{%endintlink%}, the  &ldquo;curvy region&rdquo; must approach a parallelepiped for small $\Delta\cvarfv$, $\Delta\cvarsv$, and $\Delta\cvartv$. If we approximate it
as a parallelepiped, we just need to know the location 
of the vertex $\cvarf(\cvarfv,\cvarsv,\cvartv)$ and the three vertices that share an edge with it.  The adjacent vertices $(\cvarfv+\Delta\cvarfv,\cvarsv,\cvartv)$, $(\cvarfv,\cvarsv+\Delta\cvarsv,\cvartv)$, and $(\cvarfv,\cvarsv,\cvartv+\Delta\cvartv)$ on the small box are mapped to the vertices $\cvarf(\cvarfv+\Delta\cvarfv,\cvarsv,\cvartv)$, $\cvarf(\cvarfv,\cvarsv+\Delta\cvarsv,\cvartv)$, and $\cvarf(\cvarfv,\cvarsv,\cvartv+\Delta\cvartv)$, as illustrated above.  The resulting parallelepiped with those four vertices is shown below.</p>

{% boxedapplet "change_variable_volume_parallelepiped" %}

<p>To calculate the volume of the parallelepiped, we need to take the {% intlink scalar_triple_product %}scalar triple product{%endintlink%} of the three vectors from the point $\cvarf(\cvarfv,\cvarsv,\cvartv)$ to the neighboring vertices, i.e., the vectors corresponding to the colored edges shown above.  These vectors are just the differences between the pair of points, i.e., they are
\begin{gather*}
  \cvarf(\cvarfv+\Delta\cvarfv,\cvarsv,\cvartv)-\cvarf(\cvarfv,\cvarsv,\cvartv),\\
\cvarf(\cvarfv,\cvarsv+\Delta\cvarsv,\cvartv)-\cvarf(\cvarfv,\cvarsv,\cvartv),\\
\cvarf(\cvarfv,\cvarsv,\cvartv+\Delta\cvartv)-\cvarf(\cvarfv,\cvarsv,\cvartv).\\
\end{gather*}
</p>

<p>Since we are interested in the limit where $\Delta\cvarfv$, $\Delta\cvarsv$, and $\Delta\cvartv$ go to zero, we can approximate the above differences using the {% intlink partial_derivative_limit_definition%} partial derivative limit definition{%endintlink%}.  In this limit, the vectors spanning the parallelepiped edges become
\begin{align*}
  \cvarf(\cvarfv+\Delta\cvarfv,\cvarsv,\cvartv)-\cvarf(\cvarfv,\cvarsv,\cvartv)
  &amp;= \frac{\cvarf(\cvarfv+\Delta\cvarfv,\cvarsv,\cvartv)-\cvarf(\cvarfv,\cvarsv,\cvartv)}{\Delta\cvarfv} \Delta\cvarfv\\
  &amp;\approx
  \pdiff{\cvarf}{\cvarfv}(\cvarfv,\cvarsv,\cvartv)\Delta\cvarfv\\
  \cvarf(\cvarfv,\cvarsv+\Delta\cvarsv,\cvartv)-\cvarf(\cvarfv,\cvarsv,\cvartv)
  &amp;= \frac{\cvarf(\cvarfv,\cvarsv+\Delta\cvarsv,\cvartv)-\cvarf(\cvarfv,\cvarsv,\cvartv)}{\Delta\cvarsv} \Delta\cvarsv\\
  &amp;\approx
  \pdiff{\cvarf}{\cvarsv}(\cvarfv,\cvarsv,\cvartv)\Delta\cvarsv\\
  \cvarf(\cvarfv,\cvarsv,\cvartv+\Delta\cvartv)-\cvarf(\cvarfv,\cvarsv,\cvartv)
  &amp;= \frac{\cvarf(\cvarfv,\cvarsv,\cvartv+\Delta\cvartv)-\cvarf(\cvarfv,\cvarsv,\cvartv)}{\Delta\cvartv} \Delta\cvartv\\
  &amp;\approx
  \pdiff{\cvarf}{\cvartv}(\cvarfv,\cvarsv,\cvartv)\Delta\cvartv.
\end{align*}
We label the edges of the parallelepiped, below, with these approximations.</p>

<p class="centeredImage">{% image "change_variable_volume_parallelepiped" %}</p>

<p>The volume of the curvy region is therefore approximately equal to the absolute value of the {% intlink scalar_triple_product %}scalar triple product{%endintlink%} of these vectors
\begin{align*}
  \Delta V &amp;\approx \left| \left(\pdiff{\cvarf}{\cvarfv}\Delta\cvarfv \times \pdiff{\cvarf}{\cvarsv}\Delta\cvarsv \right) \cdot \pdiff{\cvarf}{\cvartv}\Delta\cvartv \right|\\
  &amp;= \left| \left(\pdiff{\cvarf}{\cvarfv} \times \pdiff{\cvarf}{\cvarsv} \right) \cdot \pdiff{\cvarf}{\cvartv} \right|\Delta\cvarfv\Delta\cvarsv\Delta\cvartv.
\end{align*}
Given that the {%intlink derivative_matrix %}derivative matrix{%endintlink%} of $\cvarf$ is
\begin{gather*}
  \jacm{\cvarf} = \left[\begin{array}{ccc}
  \pdiff{\cvarfc_1}{\cvarfv} &amp;  \pdiff{\cvarfc_1}{\cvarsv} &amp;  \pdiff{\cvarfc_1}{\cvartv}\\
  \pdiff{\cvarfc_2}{\cvarfv} &amp;  \pdiff{\cvarfc_2}{\cvarsv} &amp;  \pdiff{\cvarfc_2}{\cvartv}\\
  \pdiff{\cvarfc_3}{\cvarfv} &amp;  \pdiff{\cvarfc_3}{\cvarsv} &amp;  \pdiff{\cvarfc_3}{\cvartv}\\
  \end{array}
  \right],
\end{gather*}
we can use the {%intlink scalar_triple_product %}determinant notation of the scalar triple product{%endintlink%} to rewrite our expression for the volume of the curvy region in terms of the determinant of the derivative matrix
\begin{gather*}
  \Delta V \approx \left| \det\jacm{\cvarf}(\cvarfv,\cvarsv,\cvartv)\right|\Delta\cvarfv\Delta\cvarsv\Delta\cvartv.
\end{gather*}
(This result reflects how the absolute value of the determinant of a linear transformation {% intlink determinant_linear_transformation lintrans3D %}gives the volume expansion of a linear transformation{%endintlink%}.)
</p>

<p>If we were to form the Riemann sum defining the triple integral in terms of
$\cvarfv$, $\cvarsv$, and $\cvartv$, each term in the sum would look like
$$f(\cvarf(\cvarfv,\cvarsv,\cvartv)) \left|\det \jacm{\cvarf}(\cvarfv,\cvarsv,\cvartv)\right|\Delta\cvarfv\Delta\cvarsv\Delta\cvartv.$$
Then, letting $\Delta\cvarfv$, $\Delta\cvarsv$, and $\Delta\cvartv$ go to zero, 
we would obtain the integral
\begin{align*}
  \iiint_\dlv f(x,y,z) \, dV = \iiint_{\dlv^*}
   f(\cvarf(\cvarfv,\cvarsv,\cvartv)) \left| \det
   \jacm{\cvarf}(\cvarfv,\cvarsv,\cvartv)\right|
  \,d\cvarfv\,d\cvarsv\,d\cvartv.
\end{align*}
</p>

<p>The key point to remember is that that we have to replace the volume factor $dV$ 
by $\left|\det \jacm{\cvarf}(\cvarfv,\cvarsv,\cvartv)\right|d\cvarfv\,d\cvarsv\,d\cvartv$.
You can think of $\left|\det \jacm{\cvarf}(\cvarfv,\cvarsv,\cvartv)\right|$ as the 
<i>volume expansion factor</i> that captures how the mapping
$\cvarf$ is expanding (or compressing) the region $\dlv^*$ at each point
as it transforms $\dlv^*$ into $\dlv$.</p>

{%endblock%}
