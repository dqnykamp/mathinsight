
<p>The {% intlink "differentiability_multivariable_theorem" %}differentiability theorem{%endintlink%} states that continuous partial derivatives are sufficient for a function to be {% intlink "differentiability_multivariable_introduction" %}differentiable{%endintlink%}.
It's important to recognize, however, that the differentiability theorem does <b>not</b> allow you to make any conclusions just from the fact that a function has discontinuous partial derivatives. 
The converse of the differentiability theorem is not true.  
It is possible for a differentiable function to have discontinuous partial derivatives.</p>

<p>An example of such a strange function is
$$f(x,y)=\begin{cases}(x^2+y^2)\sin\left(\frac{1}{\sqrt{x^2+y^2}}\right) &amp; \text{ if $(x,y) \ne (0,0)$}\\0 &amp;  \text{ if $(x,y) = (0,0)$}.\end{cases}$$
Since the argument of the sinusoid approaches infinity as one approaches the origin, it oscillates wildy near the origin.
But, the sinusoid is bounded between $-1$ and 1, and the oscillations of the sinusoid are tempered by the quadratic term $x^2+y^2$.
The function is squeezed between two {% intlink "elliptic_paraboloid" %}elliptic paraboloids{%endintlink%}
$z=x^2+y^2$ and $z=-x^2-y^2$ that go to zero very quickly as one approaches the origin.
As both paraboloids have the same horizontal tangent plane at the origin $z=0$, we can infer that $f(x,y)$ has the same tangent plane at the origin.
The function $f(x,y)$ is differentiable at the origin.</p>

<p>The below graph of $f(x,y)$ shows how it flattens near the origin.  
The cross sections facilitate visualizing its horizontal tangent plane.</p>

{% boxedapplet "differentiable_function_discontinuous_partial_derivatives" %}

<p>To verify that the partial derivatives of $f$ are zero at the origin, consistent with the horizontal tangent plane, one must use the {% intlink "partial_derivative_limit_definition" %}limit definition{%endintlink%}.  For example, the derivative with respect to $x$ can be calculated by
\begin{align*}
  \pdiff{f}{x}(0,0) &amp;= \lim_{h \to 0}
  \frac{f(h,0)-f(0,0)}{h}\\
  &amp;= \lim_{h \to 0}\frac{h^2 \sin (1/|h|)-0}{h} \\
  &amp;= \lim_{h \to 0}h \sin (1/|h|) =0.
\end{align*}
A similar calculation shows that $\pdiff{f}{y}(0,0)=0$.
</p>

<p>Away from the origin, one can use the standard differentiation formulas to calculate that
\begin{align*}
  \pdiff{f}{x}(x,y) &amp;= 2 x \sin
   \left(\frac{1}{\sqrt{x^2+y^2}}\right)-\frac{x \cos
   \left(\frac{1}{\sqrt{x^2+y^2}}\right)}{\sqrt{x^2+y^2}}\\
  \pdiff{f}{y}(x,y) &amp;= 2 y \sin
   \left(\frac{1}{\sqrt{x^2+y^2}}\right)-\frac{y \cos
   \left(\frac{1}{\sqrt{x^2+y^2}}\right)}{\sqrt{x^2+y^2}}.
\end{align*}
Both of these derivatives oscillate wildly near the origin.  For example,
the derivative with respect to $x$ along the $x$-axis is
$$\pdiff{f}{x}(x,0) = 2 x \sin
   \left(1/|x|\right)-\text{sign}(x) \cos
   \left(1/|x|\right),$$
for $x \ne 0$, where $\text{sign}(x)$ is $\pm 1$ depending on the sign of $x$.
In this case, the sine term goes to zero near the origin but the cosine term oscillates rapidly between 1 and $-1$, as it is not multiplied by anything small.
As $\pdiff{f}{x}$ approaches both 1 and $-1$ within any neighborhood of the origin, it is discontinuous there. 
In the same way, one can show that $\pdiff{f}{y}$ has wild oscillations and is discontinuous at the origin.</p>

<p>This function is a cautionary tale, reminding you to read your theorems carefully so as not to jump to conclusions.
Although counterexamples such as these are strange functions, studying them can help you understand more precisely what your mathematics is telling you.
This function should prevent you from misinterpreting the {% intlink "differentiability_multivariable_theorem" %}differentiability theorem{%endintlink%}, as you now know that continuous partial derivatives imply differentiability but not vice-versa.</p>

