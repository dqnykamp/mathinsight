{% extends "base.html" %}{% load mi_tags %}{% load url from future %}
{% block title %}Math Insight thread: {{thread}}{% endblock %}
{% block threadmenu %}class="active"{% endblock %}
{% block nolinksection %}{% endblock %}
{% block nopagenav %}{% endblock %}{% block nopagenavsl %}{% endblock %}

{% block content %}
<h3>Thread: {{thread}}</h3>

<p>{{ thread.description }} </p>

<{{thread.listtag}} class="threadsections">
  {% for thread_section in thread.thread_sections.all %}
  <li><a id="{{thread_section.fullcode}}" class="anchor"></a>{{ thread_section.name}}
    {% if thread_section.thread_pages.all or  thread_section.thread_assessments.all%}
    <ul class="threadpages">
      {% for tpage in thread_section.thread_pages.all %}
      <li>{% intlink tpage.page %}{{tpage.get_title}}{% endintlink %}</li>
      {% endfor %}
      {% for tassessment in thread_section.thread_assessments.all %}
      <li>{% assessmentlink tassessment.assessment %}{{tassessment.get_title}}{% endassessmentlink %}</li>
      {% endfor %}
    </ul>
    {% endif %}
    {% if thread_section.thread_subsections.all %}
    <ol class = "threadsections">
      {% for thread_subsection in thread_section.thread_subsections.all %}
      <li><a id="{{thread_subsection.fullcode}}" class="anchor"></a>{{ thread_subsection.name}}
	{% if thread_subsection.thread_pages.all or thread_subsection.thread_assessments.all %}
	<ul class="threadpages">
	  {% for tpage in thread_subsection.thread_pages.all %}
	  <li>{% intlink tpage.page %}{{tpage.get_title}}{% endintlink %}</li>
	  {% endfor %}
	  {% for tassessment in thread_subsection.thread_assessments.all %}
	  <li>{% assessmentlink tassessment.assessment %}{{tassessment.get_title}}{% endassessmentlink %}</li>
	  {% endfor %}
	</ul>
	{% endif %}
	{% if thread_subsection.thread_subsubsections.all %}
	<ol class = "threadsections">
	  {% for thread_subsubsection in thread_subsection.thread_subsubsections.all %}      
	  <li><a id="{{thread_subsubsection.fullcode}}" class="anchor"></a>{{ thread_subsubsection.name}}
	    {% if thread_subsubsection.thread_pages.all or thread_subsubsection.thread_assessments.all %}
	    <ul class="threadpages">
	      {% for tpage in thread_subsubsection.thread_pages.all %}
	      <li>{% intlink tpage.page %}{{tpage.get_title}}{% endintlink %}</li>
	      {% endfor %}
	      {% for tassessment in thread_subsubsection.thread_assessments.all %}
	      <li>{% assessmentlink tassessment.assessment %}{{tassessment.get_title}}{% endassessmentlink %}</li>
	      {% endfor %}
	    </ul>
	    {% endif %}
	  </li>
	  {%endfor%}
	</ol>
	{%endif%}
	</li>
      {%endfor %}
    </ol>
    {%endif%}
  </li>
  {%endfor %}
</{{thread.listtag}}>

{% endblock %}


{% block rightcolumn %}
<h2><a href="{% url 'mi-threadlist' %}" class="normaltext">Threads</a></h2>
<ul class="linklist">
  {% for other_thread in thread_list %}
  <li><a href="{% url 'mi-thread' other_thread.code %}" title="{{other_thread.description}}">{{other_thread}}</a></li>
  {% endfor %}
</ul>
{% endblock %}
