{% extends "base.html" %}
{% load mi_tags testing_tags course_tags dajaxice_templatetags %}
{% block nolinksection %}{% endblock %}
{% block title %}Main page for {{course}}{%endblock%}

{% block extrastyle %}
<link href="{{ STATIC_URL }}css/micourse.css" rel="stylesheet" type="text/css"/>
<script src="{{ STATIC_URL }}js/jquery.dajax.core.js" type="text/javascript"></script>
<script src="{{ STATIC_URL }}js/jquery.ba-serializeobject.min.js" type="text/javascript"></script>
<script src="{{ STATIC_URL }}js/ajaxcsrf.js" type="text/javascript"></script>
{% dajaxice_js_import %} 
{% endblock %}

{% block content %}
<h3>{{course}}</h3>

<h4>Next items</h4>
<p>(See entire list organized by topic on <a href="{% url 'mithreads-thread' course.thread.code %}">{{course.thread}} thread</a>.)</p>

<ul>
{% for item in next_items %}
<li>{% intlink item.thread_content.content_object %}{%endintlink%} {% complete_skip_button item student %}<br/>
</li>
{% endfor %}
</ul>

{% if upcoming_assessments %}
<h4>Items due soon</h4>
<table class="basic">
<tr><th>Item</th><th>{% if course.adjust_due_date_attendance %}Initial due date{%else%}Due date{%endif%}</th>{% if course.adjust_due_date_attendance %}<th>Adjusted due date</th>{%endif%}<th>Score</th></tr>
{% for assessment in upcoming_assessments %}
<tr><td>{% intlink assessment.1.thread_content.content_object %}{%endintlink%}</td><td>{% get_initial_due_date assessment.1 student as idd %}{{idd}}</td>{% if course.adjust_due_date_attendance %}<td><a href='{% url 'mic-adjustedduedatecalculation' assessment.1.id %}'>{{assessment.0}}</a></td>{%endif%}<td><a href='{% url 'mic-assessmentattempts' assessment.1.id %}'>{% assessment_student_score assessment.1 student %}</a></td></tr>
{% endfor %}
</table>
{% endif %}


{% endblock %}
