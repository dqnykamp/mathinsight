requirejs.config({paths:{button:"lib/button",checkbox:"lib/checkbox",component:"lib/component",doubleslider:"lib/doubleslider",dropdown:"lib/dropdown",graph:"lib/graph",hslider:"lib/hslider",normalcdf:"lib/normalcdf",radiobutton:"lib/radiobutton",radiobuttongroup:"lib/radiobuttongroup",slider:"lib/slider",text:"lib/text",tool:"lib/tool",utils:"lib/utils",vslider:"lib/vslider",fourieraudio:"lib/fourieraudio",edxintegration:"lib/edxintegration",arc:"lib/shapes/arc",arcarrow:"lib/shapes/arcarrow",arrow:"lib/shapes/arrow",cross:"lib/shapes/cross",curve:"lib/shapes/curve",diamond:"lib/shapes/diamond",line:"lib/shapes/line",point:"lib/shapes/point",polygon:"lib/shapes/polygon",rectangle:"lib/shapes/rectangle",underscore:"vendor/underscore-min",threejs:"vendor/three.min",projector:"vendor/projector",canvasrenderer:"vendor/canvasrenderer",trackballcontrols:"vendor/trackballcontrols",jschannel:"vendor/jschannel",pep:"vendor/pep.min"},shim:{threejs:{exports:"THREE"},projector:{deps:["threejs"],exports
:"THREE.Projector"},canvasrenderer:{deps:["threejs","projector"],exports:"THREE.CanvasRenderer"},trackballcontrols:{deps:["threejs"],exports:"THREE.TrackballControls"},jschannel:{exports:"Channel"}}}),define("lib/common",function(){}),define("utils",["require"],function(require){"use strict";var TWO_PI=2*Math.PI,PI_DIV_2=Math.PI/2,ONE_EIGHTY_DIV_PI=180/Math.PI,PI_DIV_ONE_EIGHTY=Math.PI/180,SVG_NS="http://www.w3.org/2000/svg",XML_NS="http://www.w3.org/XML/1998/namespace",STR={Alpha:"\u0391",Beta:"\u0392",Gamma:"\u0393",Delta:"\u0394",Epsilon:"\u0395",Zeta:"\u0396",Eta:"\u0397",Theta:"\u0398",Iota:"\u0399",Kappa:"\u039a",Lambda:"\u039b",Mu:"\u039c",Nu:"\u039d",Xi:"\u039e",Omicron:"\u039f",Pi:"\u03a0",Rho:"\u03a1",Sigma:"\u03a3",Tau:"\u03a4",Upsilon:"\u03a5",Phi:"\u03a6",Chi:"\u03a7",Psi:"\u03a8",Omega:"\u03a9",alpha:"\u03b1",beta:"\u03b2",gamma:"\u03b3",delta:"\u03b4",epsilon:"\u03b5",zeta:"\u03b6",eta:"\u03b7",theta:"\u03b8",iota:"\u03b9",kappa:"\u03ba",lambda:"\u03bb",mu:"\u03bc",nu:"\u03bd"
,xi:"\u03be",omicron:"\u03bf",pi:"\u03c0",rho:"\u03c1",sigmafinal:"\u03c2",sigma:"\u03c3",tau:"\u03c4",upsilon:"\u03c5",phi:"\u03c6",phisymbol:"\u03d5",chi:"\u03c7",psi:"\u03c8",omega:"\u03c9",degree:"\u00b0",le:"\u2264",ge:"\u2265",Infin:"\u221e",partial:"\u2202",minus:"\u2212",plus:"+",plusmn:"\u00b1","int":"\u222b",overbar:"\u0305",nobreakspace:"\u00a0",combiningmacron:"\u0304",sqrt:"\u221a",xdot:"\u1e8b",xdoubledot:"\u1e8d",ydot:"\u1e8f",ydoubledot:"\u00ff"},nbClipPath=0,lastTime=0,vendors=["ms","moz","webkit","o"],i;for(i=0;i<vendors.length&&!window.requestAnimationFrame;++i)window.requestAnimationFrame=window[vendors[i]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[vendors[i]+"CancelAnimationFrame"]||window[vendors[i]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(callback,element){var currTime=(new Date).getTime(),timeToCall=Math.max(0,16-(currTime-lastTime)),id=window.setTimeout(function(){callback(currTime+timeToCall
)},timeToCall);return lastTime=currTime+timeToCall,id}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(id){clearTimeout(id)});function degToRad(ang){return PI_DIV_ONE_EIGHTY*ang}function radToDeg(ang){return ONE_EIGHTY_DIV_PI*ang}function getxPix(fx,fleft,fwidth,wleft,wwidth){return Math.round(wleft+wwidth*(fx-fleft)/fwidth)}function getxFromPix(wx,wleft,wwidth,fleft,fwidth){return fleft+fwidth*(wx-wleft)/wwidth}function getyPix(fy,fbottom,fheight,wbottom,wheight){return Math.round(wbottom-wheight*(fy-fbottom)/fheight)}function getyFromPix(wy,wbottom,wheight,fbottom,fheight){return fbottom+fheight*(wbottom-wy)/wheight}function log10(x){return Math.log(x)/Math.LN10}function createClipPath(node,x,y,width,height){var clipPath=document.createElementNS(SVG_NS,"clipPath"),rect=document.createElementNS(SVG_NS,"rect"),uniqueID="graph-clip-path"+parseInt(nbClipPath,10);return clipPath.setAttribute("id",uniqueID),nbClipPath++,rect.setAttribute("x",x),rect.setAttribute("y",y),rect
.setAttribute("width",width),rect.setAttribute("height",height),node.appendChild(clipPath),clipPath.appendChild(rect),uniqueID}function createLine(node,x1,y1,x2,y2,cssClass){var line=document.createElementNS(SVG_NS,"line");return node.appendChild(line),line.setAttribute("x1",x1),line.setAttribute("y1",y1),line.setAttribute("x2",x2),line.setAttribute("y2",y2),line.setAttribute("class",cssClass),line}function createRect(node,x,y,width,height,cssClass){var rect=document.createElementNS(SVG_NS,"rect");return node.appendChild(rect),rect.setAttribute("x",x),rect.setAttribute("y",y),rect.setAttribute("width",width),rect.setAttribute("height",height),rect.setAttribute("class",cssClass),rect}function createCircle(node,x,y,radius,cssClass){var circle=document.createElementNS(SVG_NS,"circle");return node.appendChild(circle),circle.setAttribute("cx",x),circle.setAttribute("cy",y),circle.setAttribute("r",radius),circle.setAttribute("class",cssClass),circle}function createTriangle(node,xa,ya,xb,yb,xc
,yc,cssClass){var triangle=document.createElementNS(SVG_NS,"polygon");return node.appendChild(triangle),triangle.setAttribute("points",[xa,ya,xb,yb,xc,yc]),triangle.setAttribute("class",cssClass),triangle}function createPolygon(points,cssClass){var polygon=document.createElementNS(SVG_NS,"polygon");return polygon.setAttribute("points",points.join(",")),polygon.setAttribute("class",cssClass),polygon}function createPolyline(points,cssClass){var curve=document.createElementNS(SVG_NS,"polyline");return curve.setAttribute("points",points.join(",")),curve.setAttribute("class",cssClass),curve}function createText(node,x,y,str,cssClass){var text=document.createElementNS(SVG_NS,"text");return node.appendChild(text),text.setAttribute("x",x),text.setAttribute("y",y),text.setAttribute("class",cssClass),text.textContent=str,text}function createStyledText(textNode,str){var tspan=document.createElementNS(SVG_NS,"tspan");return tspan.textContent=str,textNode.appendChild(tspan),tspan}function createTextList
(node,x,y,strs,cssClass1,cssClass2){var len=strs.length,i,textList=document.createElementNS(SVG_NS,"g"),text=[],largestWidth=0,largestHeight=0,boxes=[],padding=4;node.appendChild(textList),textList.setAttribute("x",x),textList.setAttribute("y",y);for(i=0;i<len;i++)boxes.push(createRect(textList,0,0,10,10,cssClass2)),text.push(createText(textList,1,1,strs[i],cssClass1)),text[i].getBBox().width>largestWidth&&(largestWidth=text[i].getBBox().width),text[i].getBBox().height>largestHeight&&(largestHeight=text[i].getBBox().height);var top=y-len/2*(largestHeight+2*padding),height=largestHeight+2*padding,width=largestWidth+2*padding;for(i=0;i<len;i++)boxes[i].setAttribute("x",x),boxes[i].setAttribute("y",top+i*height),boxes[i].setAttribute("width",width),boxes[i].setAttribute("height",height),text[i].setAttribute("x",x+padding),text[i].setAttribute("y",top+(i+.5)*height);return textList}function createGroup(parentNode,childNode){var group,nextNode;return typeof childNode=="undefined"?(group=document
.createElementNS(SVG_NS,"g"),parentNode.appendChild(group)):(removeChildren(childNode),nextNode=childNode.nextSibling,parentNode.removeChild(childNode),group=parentNode.insertBefore(document.createElementNS(SVG_NS,"g"),nextNode)),group}function createBBox(parentNode){var parentNodeBBox=parentNode.getBBox(),bBox;return bBox=document.createElementNS(SVG_NS,"rect"),bBox.setAttribute("class","bBox"),bBox.setAttribute("x",parentNodeBBox.x),bBox.setAttribute("y",parentNodeBBox.y),bBox.setAttribute("width",parentNodeBBox.width),bBox.setAttribute("height",parentNodeBBox.height),parentNode.appendChild(bBox),bBox}function removeChildren(node){while(node.lastChild)node.removeChild(node.lastChild)}function replaceChildrenWithCopy(srcNode,destNode){var frag=document.createDocumentFragment(),len=srcNode.childNodes.length,i;removeChildren(destNode);for(i=0;i<len;i++)frag.appendChild(srcNode.childNodes[i].cloneNode(!0));destNode.appendChild(frag)}function toBack(node){node.parentNode.insertBefore(node,
node.parentNode.firstChild)}function toFront(node){node.parentNode.appendChild(node)}function setVisibility(node,isVisible){isVisible?node.setAttribute("visibility","visible"):node.setAttribute("visibility","hidden")}function testForJQuery(){return typeof jQuery!="undefined"}function testForFeatures(testForCanvas,testForWebGL,testForAudio,testForSVG){var testCanvas,gl,contextNames,hasWebAudio,hasAudioData,hasSVG,msg1,msg2,msg3,msg4;msg1="Your browser does not support the Canvas element.",msg2="Your browser does not support WebGL,or it is not enabled by default.",msg3="Your browser does not support Web Audio API nor Audio Data API.",msg4="Your browser does not support SVG.";if(testForCanvas){testCanvas=document.createElement("canvas");if(!testCanvas.getContext)throw msg1}if(testForWebGL){testCanvas=document.createElement("canvas"),gl=null,contextNames=["experimental-webgl","webgl","moz-webgl","webkit-3d"];for(var i=0;i<contextNames.length;i++)try{gl=testCanvas.getContext(contextNames[i])
;if(gl)break}catch(e){}if(!gl)throw msg2}if(testForAudio){hasWebAudio=!!window.webkitAudioContext,hasAudioData=!!(new Audio).mozSetup;if(!hasWebAudio&&!hasAudioData)throw msg3}if(testForSVG){hasSVG=!!document.createElementNS&&!!document.createElementNS("http://www.w3.org/2000/svg","svg").createSVGRect;if(!hasSVG)throw msg4}}function testForCanvas(){var testCanvas=document.createElement("canvas");return testCanvas.getContext?!0:!1}function testForWebGL(){var testCanvas=document.createElement("canvas"),gl=null,contextNames=["experimental-webgl","webgl","moz-webgl","webkit-3d"];for(var i=0;i<contextNames.length;i++)try{gl=testCanvas.getContext(contextNames[i]);if(gl)break}catch(e){}return gl?!0:!1}function testForChromeAudio(){return!!window.webkitAudioContext}function testForMozAudio(){return!!(new Audio).mozSetup}function testForSVG(){return!!document.createElementNS&&!!document.createElementNS("http://www.w3.org/2000/svg","svg").createSVGRect}function testFor3DRenderer(){var msg="Your browser does not support WebGL or it is not enabled by default. It also does not support the Canvas element."
;if(!testForWebGL()&&!testForCanvas())throw msg}function loadCSS(url){var link=document.createElement("link");link.type="text/css",link.rel="stylesheet",link.href=url,document.getElementsByTagName("head")[0].appendChild(link)}function unloadCSS(url){var nodeList=document.getElementsByTagName("link");for(var i=0;i<nodeList.length;i++)nodeList[i].getAttribute("rel")==="stylesheet"&&nodeList[i].getAttribute("type")==="text/css"&&nodeList[i].getAttribute("href")===url&&nodeList[i].parentNode.removeChild(nodeList[i])}function replaceCSS(url1,url2){unloadCSS(url1),loadCSS(url2)}function enableCSS(title){var nodeList=document.getElementsByTagName("link");for(var i=0;i<nodeList.length;i++)nodeList[i].getAttribute("rel").indexOf("stylesheet")!==-1&&nodeList[i].getAttribute("title")===title&&nodeList[i].setAttribute("disabled","false")}function disableCSS(title){var nodeList=document.getElementsByTagName("link");for(var i=0;i<nodeList.length;i++)nodeList[i].getAttribute("rel").indexOf("stylesheet"
)!==-1&&nodeList[i].getAttribute("title")===title&&nodeList[i].setAttribute("disabled","true")}function changeStyle(title){var nodeList=document.getElementsByTagName("link");for(var i=0;i<nodeList.length;i++)nodeList[i].getAttribute("rel").indexOf("stylesheet")>-1&&nodeList[i].getAttribute("title")&&(nodeList[i].disabled=!0,nodeList[i].getAttribute("title")===title&&(nodeList[i].disabled=!1))}function parseSubSuperScriptText(str){str=str||"";var len=str.length,i=0,start,end,found=!1,text=[],type,ntext="";while(i<len){str[i]==="_"?type="sub":str[i]==="^"&&(type="sup");if(type==="sub"||type==="sup")if(str[i+1]==="{"){i+=2,start=i,found=!1;while(i<len){if(str[i]==="}"){found=!0,end=i;break}i++}found&&end>start?(ntext.length!==0&&(text.push({s:ntext,type:"normal"}),ntext=""),type==="sub"?text.push({s:str.substring(start,end),type:"sub"}):type==="sup"&&text.push({s:str.substring(start,end),type:"sup"}),i=end+1):i=start-2}ntext+=str[i],i===len-1&&ntext.length!==0&&text.push({s:ntext,type:"normal"
}),i++}return text}function rk4(pt,h,dx,dy){var j1,j2,j3,j4,k1,k2,k3,k4,xnew,ynew;return j1=h*dx(pt.x,pt.y),k1=h*dy(pt.x,pt.y),j2=h*dx(pt.x+.5*j1,pt.y+.5*k1),k2=h*dy(pt.x+.5*j1,pt.y+.5*k1),j3=h*dx(pt.x+.5*j2,pt.y+.5*k2),k3=h*dy(pt.x+.5*j2,pt.y+.5*k2),j4=h*dx(pt.x+j3,pt.y+k3),k4=h*dy(pt.x+j3,pt.y+k3),xnew=pt.x+1/6*(j1+2*j2+2*j3+j4),ynew=pt.y+1/6*(k1+2*k2+2*k3+k4),{x:xnew,y:ynew}}function floatToString(x,digits){var mult=Math.pow(10,digits),xRounded=Math.round(mult*x)/mult;return xRounded.toFixed(digits)}function getPoints(graph,f,xStart,xEnd){var points=[],i,x,y,wx,wy,wxInc,wxStart,wxEnd,nPix;wxStart=graph.getxPix(xStart),wxEnd=graph.getxPix(xEnd),nPix=Math.abs(wxEnd-wxStart)+1,wxInc=xEnd>=xStart?1:-1;for(i=0,wx=wxStart;i<nPix;i++,wx+=wxInc)x=graph.getxFromPix(wx),y=f(x),wy=graph.getyPix(y),points.push(wx),points.push(wy);return points.join(",")}function enableHelpLink(textEl,linkEl){var text=document.getElementById(textEl),link=document.getElementById(linkEl);link.addEventListener("click"
,function(){text.style.display==="block"?(text.style.display="none",link.textContent="+ help"):(text.style.display="block",link.textContent="- help")})}return{SVG_NS:SVG_NS,XML_NS:XML_NS,TWO_PI:TWO_PI,PI_DIV_2:PI_DIV_2,STR:STR,degToRad:degToRad,radToDeg:radToDeg,getxPix:getxPix,getxFromPix:getxFromPix,getyPix:getyPix,getyFromPix:getyFromPix,log10:log10,createClipPath:createClipPath,createLine:createLine,createRect:createRect,createCircle:createCircle,createTriangle:createTriangle,createPolyline:createPolyline,createPolygon:createPolygon,createText:createText,createStyledText:createStyledText,createTextList:createTextList,createGroup:createGroup,createBBox:createBBox,removeChildren:removeChildren,replaceChildrenWithCopy:replaceChildrenWithCopy,toBack:toBack,toFront:toFront,setVisibility:setVisibility,testForFeatures:testForFeatures,testForCanvas:testForCanvas,testForWebGL:testForWebGL,testFor3DRenderer:testFor3DRenderer,testForSVG:testForSVG,testForJQuery:testForJQuery,loadCSS:loadCSS,replaceCSS
:replaceCSS,unloadCSS:unloadCSS,enableCSS:enableCSS,disableCSS:disableCSS,changeStyle:changeStyle,parseSubSuperScriptText:parseSubSuperScriptText,rk4:rk4,floatToString:floatToString,getPoints:getPoints,enableHelpLink:enableHelpLink}}),define("component",["require","utils","pep"],function(require){"use strict";var U=require("utils");require("pep");function Component(x,y,width,height){this.type="",this.x=typeof x=="undefined"?0:x,this.y=typeof y=="undefined"?0:y,this.width=typeof width=="undefined"?100:width,this.height=typeof height=="undefined"?100:height,this.node=document.createElementNS(U.SVG_NS,"g"),this.node.setAttribute("pointer-events","visible"),this.setPosition(x,y),this.eventListeners={},this.touchId=-1}return Component.prototype.setPosition=function(x,y){this.x=x,this.y=y,this.node.setAttribute("transform","translate("+parseInt(this.x,10)+","+parseInt(this.y,10)+")")},Component.prototype.setPosRot=function(trans){this.node.setAttribute("transform",trans)},Component.prototype.
setSize=function(width,height){this.width=width,this.height=height},Component.prototype.setBounds=function(x,y,width,height){this.x=x,this.y=y,this.width=width,this.height=height,this.setSize(),this.setPosition()},Component.prototype.addBBox=function(){var nodeBBox=this.node.getBBox();this.bBox=document.createElementNS(U.SVG_NS,"rect"),this.bBox.setAttribute("class","bBox"),this.bBox.setAttribute("x",nodeBBox.x),this.bBox.setAttribute("y",nodeBBox.y),this.bBox.setAttribute("width",nodeBBox.width),this.bBox.setAttribute("height",nodeBBox.height),this.bBox.setAttribute("touch-action","none"),this.node.appendChild(this.bBox)},Component.prototype.toBack=function(){},Component.prototype.toFront=function(){},Component.prototype.setVisibility=function(bool){this.isVisible=bool,this.isVisible?this.node.setAttribute("visibility","visible"):this.node.setAttribute("visibility","hidden")},Component.prototype.addEventListener=function(type,eventListener){type in this.eventListeners||(this.eventListeners
[type]=eventListener)},Component.prototype.removeEventListener=function(type){type in this.eventListeners&&delete this.eventListeners[type]},Component.prototype.fireEvent=function(event,parameters){if(typeof event!="string")throw new Error("Event object missing 'type' property.");this.eventListeners[event]!==undefined&&this.eventListeners[event](parameters)},Component.prototype.cancelDefaultAction=function(event){return event.preventDefault&&event.preventDefault(),event.returnValue=!1,!1},Component.prototype.cancelBubble=function(event){var evt=event?event:window.event;evt.stopPropagation&&evt.stopPropagation(),evt.cancelBubble!==null&&(evt.cancelBubble=!0)},Component.prototype.getMousePosition=function(event){event=event||window.event;var bcRect=this.bBox.getBoundingClientRect(),p=this.tool.svg.createSVGPoint();return p.x=Math.floor(event.clientX-bcRect.left),p.y=Math.floor(event.clientY-bcRect.top),{x:p.x,y:p.y}},Component.prototype.finalize=function(){},Component}),define("button",["require"
,"utils","component"],function(require){"use strict";var U=require("utils"),Component=require("component");function Button(x,y,width,height){Component.call(this,x,y,width,height),this.type="button",this.isPressed=!1,this.background=U.createRect(this.node,0,0,width,height,"button-background"),this.leftBorder=U.createLine(this.node,0,height,0,0,"button-light-border"),this.topBorder=U.createLine(this.node,0,0,width,0,"button-light-border"),this.rightBorder=U.createLine(this.node,width,0,width,height,"button-dark-border"),this.bottomBorder=U.createLine(this.node,width,height,0,height,"button-dark-border"),this.xt=width/2,this.yt=height/2,this.tSpans=[],this.label=U.createText(this.node,this.xt,this.yt+4,"","button-label"),this.label.setAttribute("text-anchor","middle")}return Button.prototype=Object.create(Component.prototype),Button.prototype.addText=function(){var styledText=U.createStyledText(this.label,arguments[0]);arguments.length===2&&styledText.setAttribute("class",arguments[1]),this
.tSpans.push(styledText)},Button.prototype.setText=function(index,str){this.tSpans[index].textContent=str},Button.prototype.setClass=function(index,cssClass){this.tSpans[index].setAttribute("class",cssClass)},Button.prototype.bindEvents=function(){this.pointerDown=this.pointerDown.bind(this),this.pointerUp=this.pointerUp.bind(this),this.bBox.addEventListener("pointerdown",this.pointerDown,!1)},Button.prototype.pointerDown=function(event){event=event||window.event;if(this.isPressed)return;this.isPressed=!0,this.touchId=event.touchId,this.leftBorder.setAttribute("class","button-dark-border"),this.topBorder.setAttribute("class","button-dark-border"),this.rightBorder.setAttribute("class","button-light-border"),this.bottomBorder.setAttribute("class","button-light-border"),this.label.setAttribute("x",this.xt+1),this.label.setAttribute("y",this.yt+4+1),this.fireEvent("mousedown",this),document.addEventListener("pointerup",this.pointerUp,!1),this.cancelDefaultAction(event)},Button.prototype.pointerUp=
function(event){event=event||window.event;if(event.touchId!==this.touchId)return;this.isPressed=!1,this.leftBorder.setAttribute("class","button-light-border"),this.topBorder.setAttribute("class","button-light-border"),this.rightBorder.setAttribute("class","button-dark-border"),this.bottomBorder.setAttribute("class","button-dark-border"),this.label.setAttribute("x",this.xt),this.label.setAttribute("y",this.yt+4),this.fireEvent("mouseup",this),document.removeEventListener("pointerup",this.pointerUp,!1),this.cancelDefaultAction(event)},Button.prototype.finalize=function(){this.addBBox(),this.bindEvents()},Button}),define("checkbox",["require","utils","component"],function(require){"use strict";var U=require("utils"),Component=require("component");function Checkbox(x,y,width,height){Component.call(this,x,y,width,height),this.type="checkbox",this.isChecked=!1,this.backSquare=U.createRect(this.node,0,0,12,12,"checkbox-back-square"),this.frontSquare=U.createRect(this.node,2,2,8,8,"checkbox-front-square"
),this.isChecked?this.frontSquare.setAttribute("visibility",""):this.frontSquare.setAttribute("visibility","hidden"),this.tSpans=[],this.label=U.createText(this.node,20,12,"","checkbox-label")}return Checkbox.prototype=Object.create(Component.prototype),Checkbox.prototype.addText=function(){var styledText=U.createStyledText(this.label,arguments[0]);arguments.length===2&&styledText.setAttribute("class",arguments[1]),styledText.setAttribute("y",12),styledText.setAttributeNS(U.XML_NS,"xml:space","preserve"),this.tSpans.push(styledText)},Checkbox.prototype.addSuperScript=function(){var styledText=U.createStyledText(this.label,arguments[0]);arguments.length===2&&styledText.setAttribute("class",arguments[1]),styledText.setAttribute("dx",2),styledText.setAttribute("y",7),styledText.setAttributeNS(U.XML_NS,"xml:space","preserve"),this.tSpans.push(styledText)},Checkbox.prototype.addSubScript=function(){var styledText=U.createStyledText(this.label,arguments[0]);arguments.length===2&&styledText.setAttribute
("class",arguments[1]),styledText.setAttribute("dx",2),styledText.setAttribute("y",15),styledText.setAttributeNS(U.XML_NS,"xml:space","preserve"),this.tSpans.push(styledText)},Checkbox.prototype.setText=function(index,str){this.tSpans[index].textContent=str},Checkbox.prototype.setClass=function(index,cssClass){this.tSpans[index].setAttribute("class",cssClass)},Checkbox.prototype.setFrontSquareClass=function(cssClass){this.frontSquare.setAttribute("class",cssClass)},Checkbox.prototype.bindEvents=function(){this.pointerDown=this.pointerDown.bind(this),this.bBox.addEventListener("pointerdown",this.pointerDown,!1)},Checkbox.prototype.setChecked=function(bool){this.isChecked=bool,this.isChecked?this.frontSquare.setAttribute("visibility",""):this.frontSquare.setAttribute("visibility","hidden")},Checkbox.prototype.pointerDown=function(event){event=event||window.event,this.isChecked=!this.isChecked,this.isChecked?this.frontSquare.setAttribute("visibility",""):this.frontSquare.setAttribute("visibility"
,"hidden"),this.fireEvent("mousedown",this),this.cancelDefaultAction(event)},Checkbox.prototype.finalize=function(){this.addBBox(),this.bindEvents()},Checkbox}),define("slider",["require","utils","component"],function(require){"use strict";var U=require("utils"),Component=require("component");function Slider(x,y,width,height){Component.call(this,x,y,width,height),this.orientation="horizontal",this.min=0,this.max=10,this.span=10,this.shortTickStep=-1,this.shortTickMin=this.min,this.shortTickMax=this.max,this.longTickStep=-1,this.longTickMin=this.min,this.longTickMax=this.max,this.labelStep=-1,this.labelDecimalDigits=1,this.zeroHasDecimalPoint=!1,this.labelMin=this.min,this.labelMax=this.max,this.labelXOffset=-10,this.labelYOffset=-10,this.textXOffset=-10,this.textYOffset=10,this.value=0,this.valueDecimalDigits=2,this.valueHasDegree=!1,this.valueTextXOffset=10,this.valueTextYOffset=-10,this.valueHasPrefix=!1,this.valuePrefix="",this.valueHasSuffix=!1,this.valueSuffix="",this.mouseIsDragged=!1
,this.isInTickZone=!1,this.isSelected=!1,this.snapToTicks=!1,this.snapToStep=!1,this.snapStep=0,this.hasScale=!1,this.scale=1,this.hasLogScale=!1,this.alwaysShowKnob=!0,this.keepValueInBounds=!0}return Slider.prototype=Object.create(Component.prototype),Slider.prototype.showAxis=function(show){show?this.axis.setAttribute("visibility","visible"):this.axis.setAttribute("visibility","hidden")},Slider.prototype.showDarkTrack=function(show){show?this.darkTrack.setAttribute("visibility","visible"):this.darkTrack.setAttribute("visibility","hidden")},Slider.prototype.showLightTrack=function(show){show?this.lightTrack.setAttribute("visibility","visible"):this.lightTrack.setAttribute("visibility","hidden")},Slider.prototype.showKnobBody=function(show){show?(this.knobLine1.setAttribute("visibility","visible"),this.knobLine2.setAttribute("visibility","visible"),this.knobLine3.setAttribute("visibility","visible"),this.knobLine4.setAttribute("visibility","visible"),this.knobLine5.setAttribute("visibility"
,"visible")):(this.knobLine1.setAttribute("visibility","hidden"),this.knobLine2.setAttribute("visibility","hidden"),this.knobLine3.setAttribute("visibility","hidden"),this.knobLine4.setAttribute("visibility","hidden"),this.knobLine5.setAttribute("visibility","hidden"))},Slider.prototype.showKnobPointer=function(show){show?this.knobPointer.setAttribute("visibility","visible"):this.knobPointer.setAttribute("visibility","hidden")},Slider.prototype.showKnob=function(show){show?this.knob.setAttribute("visibility","visible"):this.knob.setAttribute("visibility","hidden")},Slider.prototype.showLabels=function(show){show?this.labels.setAttribute("visibility","visible"):this.labels.setAttribute("visibility","hidden")},Slider.prototype.showText=function(show){show?this.text.setAttribute("visibility","visible"):this.text.setAttribute("visibility","hidden")},Slider.prototype.showValue=function(show){show?this.valueText.setAttribute("visibility","visible"):this.valueText.setAttribute("visibility","hidden"
)},Slider.prototype.setPlottingBounds=function(min,max){this.min=min,this.max=max,this.span=this.max-this.min},Slider.prototype.setKnobBody=function(cssClass){this.knobLine1.setAttribute("class",cssClass),this.knobLine2.setAttribute("class",cssClass),this.knobLine3.setAttribute("class",cssClass),this.knobLine4.setAttribute("class",cssClass),this.knobLine5.setAttribute("class",cssClass)},Slider.prototype.setKnobPointer=function(cssClass){this.knobPointer.setAttribute("class",cssClass)},Slider.prototype.setShortTicks=function(){arguments.length===1?(this.shortTickStep=arguments[0],this.shortTickMin=this.min,this.shortTickMax=this.max):arguments.length===3&&(this.shortTickStep=arguments[0],this.shortTickMin=arguments[1],this.shortTickMax=arguments[2])},Slider.prototype.setLongTicks=function(){arguments.length===1?(this.longTickStep=arguments[0],this.longTickMin=this.min,this.longTickMax=this.max):arguments.length===3&&(this.longTickStep=arguments[0],this.longTickMin=arguments[1],this.longTickMax=
arguments[2])},Slider.prototype.setAutomaticLabels=function(){arguments.length===2?(this.labelStep=arguments[0],this.labelDecimalDigits=arguments[1],this.labelMin=this.min,this.labelMax=this.max):arguments.length===3?(this.labelStep=arguments[0],this.labelDecimalDigits=arguments[1],this.zeroHasDecimalPoint=arguments[2],this.labelMin=this.min,this.labelMax=this.max):arguments.length===5?(this.labelStep=arguments[0],this.labelDecimalDigits=arguments[1],this.zeroHasDecimalPoint=arguments[2],this.labelMin=arguments[3],this.labelMax=arguments[4]):arguments.length===6&&(this.labelStep=arguments[0],this.labelDecimalDigits=arguments[1],this.zeroHasDecimalPoint=arguments[2],this.labelMin=arguments[3],this.labelMax=arguments[4],this.orientation==="horizontal"?this.labelYOffset=arguments[5]:this.orientation==="vertical"&&(this.labelXOffset=arguments[5]))},Slider.prototype.setScale=function(scale){this.hasScale=!0,this.scale=scale},Slider.prototype.setValuePrefix=function(prefix){this.valueHasPrefix=!0
,this.valuePrefix=prefix},Slider.prototype.setValueSuffix=function(suffix){this.valueHasSuffix=!0,this.valueSuffix=suffix},Slider.prototype.clipToPlottingBounds=function(val){return val<this.min?this.min:val>this.max?this.max:val},Slider.prototype.clipToBounds=function(wval){return this.orientation==="horizontal"?wval>this.width?this.width:wval<0?0:wval:wval>this.height?this.height:wval<0?0:wval},Slider.prototype.updateValueText=function(){var val,str;this.hasScale?val=this.scale*this.value:this.hasLogScale?val=Math.pow(10,this.value):val=this.value,str=val.toFixed(this.valueDecimalDigits),this.valueHasDegree&&(str+=U.STR.degree),this.valueHasPrefix&&(str=this.valuePrefix+str),this.valueHasSuffix&&(str+=this.valueSuffix),this.valueText.textContent=str},Slider.prototype.bindEvents=function(){this.pointerDown=this.pointerDown.bind(this),this.pointerMove=this.pointerMove.bind(this),this.pointerUp=this.pointerUp.bind(this),this.bBox.addEventListener("pointerdown",this.pointerDown,!1)},Slider
.prototype.pointerDown=function(event){event=event||window.event;var mpos;if(this.isSelected)return;this.touchId=event.pointerId,mpos=this.getMousePosition(event),this.isSelected=!0,this.getClickZone(mpos),this.getValue(mpos),this.updateKnobPosition(),this.updateValueText(),this.fireEvent("mousedown"),document.addEventListener("pointermove",this.pointerMove,!0),document.addEventListener("pointerup",this.pointerUp,!0),this.cancelDefaultAction(event)},Slider.prototype.pointerMove=function(event){event=event||window.event;var mpos,touchIndex;if(event.pointerId!==this.touchId)return;this.isSelected&&(mpos=this.getMousePosition(event),this.getValue(mpos),this.updateKnobPosition(),this.updateValueText(),this.fireEvent("mousedrag")),this.cancelDefaultAction(event)},Slider.prototype.pointerUp=function(event){event=event||window.event;var mpos,touchIndex;if(this.isSelected){if(event.pointerId!==this.touchId)return;mpos=this.getMousePosition(event),this.getValue(mpos),this.updateKnobPosition(),this
.updateValueText(),this.fireEvent("mouseup"),document.removeEventListener("pointermove",this.pointerMove,!0),document.removeEventListener("pointerup",this.pointerUp,!0)}this.isSelected=!1,this.cancelDefaultAction(event)},Slider}),define("doubleslider",["require","utils","slider"],function(require){"use strict";var U=require("utils"),Slider=require("slider");function DoubleSlider(x,y,width,height){Slider.call(this,x,y,width,height),this.type="doubleslider",this.orientation="horizontal",this.wyAxis=0,this.wyTrack=this.wyAxis+5,this.wx1Value=0,this.wx2Value=0,this.x1Value=0,this.x2Value=0,this.x1Selected=!1,this.x2Selected=!1,this.axis=U.createLine(this.node,0,this.wyAxis,this.width,this.wyAxis,"slider-axis"),this.darkTrack=U.createLine(this.node,0,this.wyTrack,this.width,this.wyTrack,"slider-dark-track"),this.lightTrack=U.createLine(this.node,0,this.wyTrack+2,this.width,this.wyTrack+2,"slider-light-track"),this.leftKnob=document.createElementNS(U.SVG_NS,"g"),this.leftKnob.setAttribute("pointer-events"
,"visible"),this.rightKnob=document.createElementNS(U.SVG_NS,"g"),this.rightKnob.setAttribute("pointer-events","all"),this.leftKnobLine1=U.createLine(this.leftKnob,this.wx1Value+1,this.wyTrack-1,this.wx1Value+1,this.wyTrack+4,"slider-knob-body"),this.leftKnobLine2=U.createLine(this.leftKnob,this.wx1Value-1,this.wyTrack-1,this.wx1Value-1,this.wyTrack+4,"slider-knob-body"),this.leftKnobLine3=U.createLine(this.leftKnob,this.wx1Value,this.wyTrack-1,this.wx1Value,this.wyTrack+4,"slider-knob-body"),this.leftKnobLine4=U.createLine(this.leftKnob,this.wx1Value+2,this.wyTrack,this.wx1Value+2,this.wyTrack+3,"slider-knob-body"),this.leftKnobLine5=U.createLine(this.leftKnob,this.wx1Value-2,this.wyTrack,this.wx1Value-2,this.wyTrack+3,"slider-knob-body"),this.rightKnobLine1=U.createLine(this.rightKnob,this.wx2Value+1,this.wyTrack-1,this.wx2Value+1,this.wyTrack+4,"slider-knob-body"),this.rightKnobLine2=U.createLine(this.rightKnob,this.wx2Value-1,this.wyTrack-1,this.wx2Value-1,this.wyTrack+4,"slider-knob-body"
),this.rightKnobLine3=U.createLine(this.rightKnob,this.wx2Value,this.wyTrack-1,this.wx2Value,this.wyTrack+4,"slider-knob-body"),this.rightKnobLine4=U.createLine(this.rightKnob,this.wx2Value+2,this.wyTrack,this.wx2Value+2,this.wyTrack+3,"slider-knob-body"),this.rightKnobLine5=U.createLine(this.rightKnob,this.wx2Value-2,this.wyTrack,this.wx2Value-2,this.wyTrack+3,"slider-knob-body"),this.leftKnobPointer=U.createLine(this.leftKnob,this.wx1Value,this.wyTrack-3,this.wx1Value,this.wyTrack+4,"slider-knob-pointer"),this.righttKnobPointer=U.createLine(this.rightKnob,this.wx2Value,this.wyTrack-3,this.wx2Value,this.wyTrack+4,"slider-knob-pointer"),this.node.appendChild(this.leftKnob),this.node.appendChild(this.rightKnob)}return DoubleSlider.prototype=Object.create(Slider.prototype),DoubleSlider.prototype.setShortTicks=function(){var x,wx;Slider.prototype.setShortTicks.apply(this,arguments),this.shortTicks=U.createGroup(this.node,this.shortTicks);if(this.shortTickStep>0)for(x=this.shortTickMin;x<=this
.shortTickMax;x+=this.shortTickStep)wx=this.getxPix(x),wx>this.width&&(wx=this.width),U.createLine(this.shortTicks,wx,this.wyAxis,wx,this.wyAxis-2,"slider-short-ticks")},DoubleSlider.prototype.setLongTicks=function(){var x,wx;Slider.prototype.setLongTicks.apply(this,arguments),this.longTicks=U.createGroup(this.node,this.longTicks);if(this.longTickStep>0)for(x=this.longTickMin;x<=this.longTickMax;x+=this.longTickStep)wx=this.getxPix(x),wx>this.width&&(wx=this.width),U.createLine(this.longTicks,wx,this.wyAxis,wx,this.wyAxis-4,"slider-long-ticks")},DoubleSlider.prototype.setAutomaticLabels=function(){var x,wx,wy,str;Slider.prototype.setAutomaticLabels.apply(this,arguments),wy=this.wyAxis+this.labelYOffset,this.labels=U.createGroup(this.node,this.labels);if(this.labelStep>0)for(x=this.labelMin;x<=this.labelMax;x+=this.labelStep)wx=this.getxPix(x),Math.abs(x)<1e-5&&!this.zeroHasDecimalPoint?str="0":str=x.toFixed(this.labelDecimalDigits),U.createText(this.labels,wx,wy,str,"hslider-labels")},DoubleSlider
.prototype.setLabels=function(){var wx,wy,str,lbs,lb;arguments.length===1?lbs=arguments[0]:arguments.length===2&&(lbs=arguments[0],this.labelYOffset=arguments[1]),wy=this.wyAxis+this.labelYOffset,this.labels=U.createGroup(this.node,this.labels);for(var i=0,len=lbs.length;i<len;i++)wx=this.getxPix(lbs[i].x),U.createText(this.labels,wx,wy,lbs[i].str,"hslider-labels")},DoubleSlider.prototype.setText=function(){var str,cssClass,knobSelector=arguments[1];arguments.length===2?(str=arguments[0],cssClass="hslider-text"):arguments.length===3?(str=arguments[0],cssClass=arguments[2]):arguments.length===4&&(str=arguments[0],cssClass=arguments[2],this.textXOffset=arguments[3]),typeof this.leftKnobText=="undefined"&&knobSelector==="left"&&(this.leftKnobText=U.createText(this.leftKnob,20,this.wyTrack+20,str,cssClass)),typeof this.rightKnobText=="undefined"&&knobSelector==="right"&&(this.rightKnobText=U.createText(this.rightKnob,20,this.wyTrack+20,str,cssClass)),this.updateText(str,cssClass,knobSelector
)},DoubleSlider.prototype.updateText=function(str,cssClass,knobSelector){knobSelector==="left"?(this.leftKnobText.textContent=str,this.leftKnobText.setAttribute("class",cssClass)):knobSelector==="right"&&(this.rightKnobText.textContent=str,this.rightKnobText.setAttribute("class",cssClass))},DoubleSlider.prototype.setValue=function(){var cssClass;arguments.length===2?(arguments[1]==="left"?this.x1Value=arguments[0]:arguments[1]==="right"&&(this.x2Value=arguments[0]),cssClass="hslider-value-text"):arguments.length===3?(arguments[1]==="left"?this.x1Value=arguments[0]:arguments[1]==="right"&&(this.x2Value=arguments[0]),this.valueDecimalDigits=arguments[2],cssClass="hslider-value-text"):arguments.length===4?(arguments[1]==="left"?this.x1Value=arguments[0]:arguments[1]==="right"&&(this.x2Value=arguments[0]),this.valueDecimalDigits=arguments[2],cssClass=arguments[3]):arguments.length===5?(arguments[1]==="left"?this.x1Value=arguments[0]:arguments[1]==="right"&&(this.x2Value=arguments[0]),this.valueDecimalDigits=
arguments[2],cssClass=arguments[3],this.valueHasDegree=arguments[4]):arguments.length===6&&(arguments[1]==="left"?this.x1Value=arguments[0]:arguments[1]==="right"&&(this.x2Value=arguments[0]),this.valueDecimalDigits=arguments[2],cssClass=arguments[3],this.valueHasDegree=arguments[4],this.valueTextXOffset=arguments[5]),this.x1Value=this.clipToPlottingBounds(this.x1Value),this.x2Value=this.clipToPlottingBounds(this.x2Value);if(typeof this.value1Text=="undefined"||typeof this.value2Text=="undefined")this.value1Text=U.createText(this.node,this.width+this.valueTextXOffset,this.wyTrack+3,"",cssClass),this.value2Text=U.createText(this.node,this.width+this.valueTextXOffset+40,this.wyTrack+3,"",cssClass);this.wx1Value=this.getxPix(this.x1Value),this.wx2Value=this.getxPix(this.x2Value),this.updateKnobPosition(),this.updateValueText(cssClass)},DoubleSlider.prototype.showValue=function(show){show?(this.value1Text.setAttribute("visibility","visible"),this.value2Text.setAttribute("visibility","visible"
)):(this.value1Text.setAttribute("visibility","hidden"),this.value2Text.setAttribute("visibility","hidden"))},DoubleSlider.prototype.updateValueText=function(){var val1,val2,str1,str2;arguments.length===1&&(this.value1Text.setAttribute("class",arguments[0]),this.value2Text.setAttribute("class",arguments[0])),this.hasScale?(val1=this.scale*this.x1Value,val2=this.scale*this.x2Value):(val1=this.x1Value,val2=this.x2Value),str1=val1.toFixed(this.valueDecimalDigits),str2=val2.toFixed(this.valueDecimalDigits),this.valueHasDegree&&(str1+=U.STR.degree,str2+=U.STR.degree),this.value1Text.textContent=str1,this.value2Text.textContent=str2},DoubleSlider.prototype.getValue=function(pt){var shortStep,longStep,step,wstep;this.selectClosestKnob(pt);if(this.isInTickZone||this.snapToTicks){var wxvalue=this.findNearestTick(pt);this.x1Selected?this.wx1Value=wxvalue:this.x2Selected&&(this.wx2Value=wxvalue)}else this.x1Selected?this.wx1Value=pt.x:this.x2Selected&&(this.wx2Value=pt.x);longStep=this.longTickStep>0?
this.longTickStep:Number.MAX_VALUE,shortStep=this.shortTickStep>0?this.shortTickStep:Number.MAX_VALUE,step=Math.min(shortStep,longStep),wstep=step*this.width/(this.max-this.min),this.wx1Value>this.wx2Value-wstep&&(this.wx1Value=this.wx2Value-wstep),this.wx2Value<this.wx1Value+wstep&&(this.wx2Value=this.wx1Value+wstep),this.wx1Value=this.clipToBounds(this.wx1Value),this.x1Value=this.getxFromPix(this.wx1Value),this.wx2Value=this.clipToBounds(this.wx2Value),this.x2Value=this.getxFromPix(this.wx2Value)},DoubleSlider.prototype.getClickZone=function(pt){pt.y<=10?this.isInTickZone=!0:this.isInTickZone=!1},DoubleSlider.prototype.findNearestTick=function(pt){var x,wx,wxc=pt.x,currentDist,minDist=Number.MAX_VALUE,step,result;this.longTickStep>0&&(step=this.longTickStep),this.shortTickStep>0&&(step=this.shortTickStep);if(this.shortTickStep>0||this.longTickStep>0)for(x=this.min;x<=this.max;x+=step)wx=this.getxPix(x),currentDist=Math.abs(wxc-wx),currentDist<minDist&&(minDist=currentDist,result=wx);else result=
wxc;return result},DoubleSlider.prototype.selectClosestKnob=function(pt){var x,wx,wxc=pt.x,x1Dist=Math.abs(wxc-this.wx1Value),x2Dist=Math.abs(wxc-this.wx2Value);x1Dist<x2Dist?(this.x1Selected=!0,this.x2Selected=!1):(this.x1Selected=!1,this.x2Selected=!0)},DoubleSlider.prototype.updateKnobPosition=function(){this.leftKnob.setAttribute("transform","translate("+parseInt(this.wx1Value,10)+", 0)"),this.rightKnob.setAttribute("transform","translate("+parseInt(this.wx2Value,10)+", 0)")},DoubleSlider.prototype.setScale=function(scale){this.hasScale=!0,this.scale=scale},DoubleSlider.prototype.getxPix=function(x){return Math.round(this.width*(x-this.min)/this.span)},DoubleSlider.prototype.getxFromPix=function(wx){return this.min+this.span*wx/this.width},DoubleSlider.prototype.resizeBBox=function(){this.bBox.setAttribute("x",0),this.bBox.setAttribute("y",-10),this.bBox.setAttribute("width",this.width),this.bBox.setAttribute("height",20)},DoubleSlider.prototype.finalize=function(){this.addBBox(),this
.resizeBBox(),this.bindEvents()},DoubleSlider}),define("text",["require","utils","component"],function(require){"use strict";var U=require("utils"),Component=require("component");function Text(x,y){Component.call(this,x,y),this.type="text",this.tSpans=[],this.text=U.createText(this.node,0,0,"","daimp-text")}return Text.prototype=Object.create(Component.prototype),Text.prototype.addText=function(str,cssClass){var styledText=U.createStyledText(this.text,str);styledText.setAttribute("class",cssClass),styledText.setAttribute("y",0),styledText.setAttributeNS(U.XML_NS,"xml:space","preserve"),this.tSpans.push(styledText)},Text.prototype.addSubScript=function(str,cssClass){var styledText=U.createStyledText(this.text,str);styledText.setAttribute("class",cssClass),styledText.setAttribute("dx",2),styledText.setAttribute("y",3),styledText.setAttributeNS(U.XML_NS,"xml:space","preserve"),this.tSpans.push(styledText)},Text.prototype.addSuperScript=function(str,cssClass){var styledText=U.createStyledText
(this.text,str);styledText.setAttribute("class",cssClass),styledText.setAttribute("dx",2),styledText.setAttribute("y",-5),styledText.setAttributeNS(U.XML_NS,"xml:space","preserve"),this.tSpans.push(styledText)},Text.prototype.addSubSuperScript=function(subStr,supStr,cssClass){this.addSubScript(subStr,cssClass),this.addSuperScript(supStr,cssClass),this.tSpans[this.tSpans.length-1].setAttribute("dx",-6)},Text.prototype.setText=function(index,str){this.tSpans[index].textContent=str},Text.prototype.setClass=function(index,cssClass){this.tSpans[index].setAttribute("class",cssClass)},Text}),define("dropdown",["require","utils","component","text"],function(require){"use strict";var U=require("utils"),Component=require("component"),Text=require("text");function Dropdown(x,y,width,height){Component.call(this,x,y,width,height),this.type="dropdown",this.isDropped=!1,this.button=U.createGroup(this.node),this.square=U.createRect(this.button,0,0,16,16,"dropdown-square"),this.triangle=U.createTriangle
(this.button,4,6,12,6,8,10,"dropdown-triangle"),this.text=[],this.boxes=[],this.hpadding=8,this.vpadding=4,this.index=0,this.itemShift=0}return Dropdown.prototype=Object.create(Component.prototype),Dropdown.prototype.addItems=function(strs,index,itemShift){var len=strs.length,i,j,largestWidth=0,largestHeight=0,left,top,width,height,menuItemText,menuItemTokenText=[],l;this.index=index,this.itemShift=itemShift,this.textList=U.createGroup(this.node),this.textList.setAttribute("x",this.x),this.textList.setAttribute("y",this.y);for(i=0;i<len;i++){this.boxes.push(U.createRect(this.textList,0,0,100,100,"dropdown-square")),this.text.push(U.createText(this.textList,200,200,"","dropdown-label-selected")),menuItemText=U.parseSubSuperScriptText(strs[i]);for(j=0;j<menuItemText.length;j++)menuItemTokenText.push(U.createStyledText(this.text[i],menuItemText[j].s)),l=menuItemTokenText.length-1,menuItemText[j].type==="normal"?(menuItemTokenText[l].setAttributeNS(U.XML_NS,"xml:space","preserve"),menuItemTokenText
[l].setAttribute("class","dropdown-label-unselected")):menuItemText[j].type==="sub"?(menuItemTokenText[l].setAttribute("baseline-shift","-30%"),menuItemTokenText[l].setAttributeNS(U.XML_NS,"xml:space","preserve"),menuItemTokenText[l].setAttribute("class","dropdown-label-sub-sup-unselected")):(menuItemTokenText[l].setAttribute("baseline-shift","30%"),menuItemTokenText[l].setAttributeNS(U.XML_NS,"xml:space","preserve"),menuItemTokenText[l].setAttribute("class","dropdown-label-sub-sup-unselected"));this.text[i].getBBox().width>largestWidth&&(largestWidth=this.text[i].getBBox().width),this.text[i].getBBox().height>largestHeight&&(largestHeight=this.text[i].getBBox().height)}this.top=8-(len/2+this.itemShift)*(largestHeight+2*this.vpadding),this.left=17,this.h=largestHeight+2*this.vpadding,this.w=largestWidth+2*this.hpadding,this.yb=(len/2+this.itemShift)*(largestHeight+2*this.vpadding)-8;for(i=0;i<len;i++)this.boxes[i].setAttribute("x",this.left),this.boxes[i].setAttribute("y",this.top+i*this
.h),this.boxes[i].setAttribute("width",this.w),this.boxes[i].setAttribute("height",this.h),this.text[i].setAttribute("x",this.left+this.hpadding-1),this.text[i].setAttribute("y",this.top+(i+.5)*this.h);this.textList.setAttribute("visibility","hidden"),this.label=this.text[this.index].cloneNode(!0),this.button.appendChild(this.label),this.label.setAttribute("x",16+this.hpadding),this.label.setAttribute("y",8),this.label.setAttribute("class","dropdown-label-selected"),this.selectAllChildren(this.label)},Dropdown.prototype.setSquareClass=function(cssClass){this.square.setAttribute("class",cssClass)},Dropdown.prototype.setTriangleClass=function(cssClass){this.triangle.setAttribute("class",cssClass)},Dropdown.prototype.bindEvents=function(){this.pointerDown=this.pointerDown.bind(this),this.pointerOver=this.pointerOver.bind(this),this.pointerOut=this.pointerOut.bind(this),this.node.setAttribute("pointer-events","none"),this.button.addEventListener("pointerdown",this.pointerDown,!0),this.button
.setAttribute("pointer-events","all"),this.button.setAttribute("touch-action","none"),this.textList.addEventListener("pointerdown",this.pointerDown,!0),this.textList.addEventListener("pointerover",this.pointerOver,!1),this.textList.addEventListener("pointerout",this.pointerOut,!0),this.textList.setAttribute("pointer-events","none"),this.textList.setAttribute("touch-action","none")},Dropdown.prototype.buttonIsTarget=function(event){return event.target.parentNode===this.button},Dropdown.prototype.listIsTarget=function(event){return event.target.parentNode===this.textList||event.target.parentNode.parentNode===this.textList},Dropdown.prototype.unselectAllChildren=function(parentNode){var childNodes=parentNode.childNodes,i,attr;for(i=0;i<childNodes.length;i++)attr=childNodes[i].getAttribute("class"),attr==="dropdown-label-selected"?childNodes[i].setAttribute("class","dropdown-label-unselected"):attr==="dropdown-label-sub-sup-selected"&&childNodes[i].setAttribute("class","dropdown-label-sub-sup-unselected"
)},Dropdown.prototype.selectAllChildren=function(parentNode){var childNodes=parentNode.childNodes,i,attr;for(i=0;i<childNodes.length;i++)attr=childNodes[i].getAttribute("class"),attr==="dropdown-label-unselected"?childNodes[i].setAttribute("class","dropdown-label-selected"):attr==="dropdown-label-sub-sup-unselected"&&childNodes[i].setAttribute("class","dropdown-label-sub-sup-selected")},Dropdown.prototype.getMousePos=function(el,event){event=event||window.event;var bcRect=el.getBoundingClientRect(),p=this.tool.svg.createSVGPoint();return p.x=event.clientX-bcRect.left,p.y=event.clientY-bcRect.top,{x:p.x,y:p.y}},Dropdown.prototype.pointerDown=function(event){var mpos;this.listIsTarget(event)?(mpos=this.getMousePos(this.textList,event),this.index=Math.floor(mpos.y/this.h),U.replaceChildrenWithCopy(this.text[this.index],this.label),document.removeEventListener("pointerdown",this.pointerDown,!0),this.isDropped=!this.isDropped):this.buttonIsTarget(event)?(this.isDropped?document.removeEventListener
("pointerdown",this.pointerDown,!0):document.addEventListener("pointerdown",this.pointerDown,!0),this.isDropped=!this.isDropped):(document.removeEventListener("pointerdown",this.pointerDown,!0),this.isDropped=!this.isDropped),this.isDropped?(this.textList.setAttribute("visibility","visible"),this.textList.setAttribute("pointer-events","all"),this.label.setAttribute("visibility","hidden")):(this.textList.setAttribute("visibility","hidden"),this.textList.setAttribute("pointer-events","none"),this.label.setAttribute("visibility","visible")),this.fireEvent("mousedown",{index:this.index}),this.cancelBubble(event),this.cancelDefaultAction(event)},Dropdown.prototype.pointerOver=function(event){var mpos=this.getMousePos(this.textList,event),hoveredIndex=Math.floor(mpos.y/this.h);hoveredIndex>=this.text.length&&(hoveredIndex=this.text.length-1),this.text[hoveredIndex].setAttribute("class","dropdown-label-selected"),this.selectAllChildren(this.text[hoveredIndex]),this.cancelBubble(event)},Dropdown
.prototype.pointerOut=function(event){for(var i=0,len=this.text.length;i<len;i++)this.text[i].setAttribute("class","dropdown-label-unselected"),this.unselectAllChildren(this.text[i]);this.cancelBubble(event),this.cancelDefaultAction(event)},Dropdown.prototype.finalize=function(){this.bindEvents()},Dropdown}),define("graph",["require","utils","component"],function(require){"use strict";var U=require("utils"),Component=require("component");function Graph(x,y,width,height){Component.call(this,x,y,width,height),this.type="graph",this.xMin=-10,this.xMax=10,this.xSpan=10,this.yMin=-10,this.yMax=10,this.ySpan=10,this.x0=0,this.y0=0,this.wx0=0,this.wy0=0,this.xShortTickStep=1,this.xShortTickMin=this.xMin,this.xShortTickMax=this.xMax,this.xLongTickStep=2,this.xLongTickMin=this.xMin,this.xLongTickMax=this.xMax,this.xLabelStep=2,this.xLabelMin=this.xMin,this.xLabelMax=this.xMax,this.xGridStep=2,this.xGridMin=this.xMin,this.xGridMax=this.xMax,this.xZeroHasDecimalPoint=!0,this.xTextXOffset=10,this.xLabelYOffset=8
,this.xLabelDecimalDigits=1,this.yShortTickStep=1,this.yShortTickMin=this.yMin,this.yShortTickMax=this.yMax,this.yLongTickStep=2,this.yLongTickMin=this.yMin,this.yLongTickMax=this.yMax,this.yLabelStep=2,this.yLabelMin=this.yMin,this.yLabelMax=this.yMax,this.yGridStep=2,this.yGridMin=this.yMin,this.yGridMax=this.yMax,this.formatYZero=!0,this.yTextYOffset=-13,this.yLabelXOffset=-10,this.yLabelDecimalDigits=1,this.hasXScale=!1,this.xScale=0,this.hasYScale=!1,this.yScale=0,this.hasxLog=!1,this.hasyLog=!1,this.xPowerMin=1,this.xPowerMax=5,this.yPowerMin=1,this.yPowerMax=5,this.hasHCrosshair=!1,this.hasVCrosshair=!1,this.mouseInside=!1,this.isDragging=!1,this.isReading=!1,this.hasReadout=!1,this.clipPath=U.createClipPath(this.node,0,0,this.width,this.height),U.createRect(this.node,0,0,this.width,this.height,"graph-background-rectangle"),this.common=U.createGroup(this.node),this.shapes=U.createGroup(this.node),this.crosshairs=U.createGroup(this.node)}return Graph.prototype=Object.create(Component
.prototype),Graph.prototype.showBorder=function(show){show?this.border.setAttribute("visibility","visible"):this.border.setAttribute("visibility","hidden")},Graph.prototype.showXAxis=function(show){show?this.xAxis.setAttribute("visibility","visible"):this.xAxis.setAttribute("visibility","hidden")},Graph.prototype.showXText=function(show){show?this.xText.setAttribute("visibility","visible"):this.xText.setAttribute("visibility","hidden")},Graph.prototype.showXGrid=function(show){show?this.xGrid.setAttribute("visibility","visible"):this.xGrid.setAttribute("visibility","hidden")},Graph.prototype.showXShortTicks=function(show){show?this.xShortTicks.setAttribute("visibility","visible"):this.xShortTicks.setAttribute("visibility","hidden")},Graph.prototype.showXLongTicks=function(show){show?this.xLongTicks.setAttribute("visibility","visible"):this.xLongTicks.setAttribute("visibility","hidden")},Graph.prototype.showXLabels=function(show){show?this.xLabels.setAttribute("visibility","visible"):this
.xLabels.setAttribute("visibility","hidden")},Graph.prototype.showYAxis=function(show){show?this.yAxis.setAttribute("visibility","visible"):this.yAxis.setAttribute("visibility","hidden")},Graph.prototype.showYText=function(show){show?this.yText.setAttribute("visibility","visible"):this.yText.setAttribute("visibility","hidden")},Graph.prototype.showYGrid=function(show){show?this.yGrid.setAttribute("visibility","visible"):this.yGrid.setAttribute("visibility","hidden")},Graph.prototype.showYShortTicks=function(show){show?this.yShortTicks.setAttribute("visibility","visible"):this.yShortTicks.setAttribute("visibility","hidden")},Graph.prototype.showYLongTicks=function(show){show?this.yLongTicks.setAttribute("visibility","visible"):this.yLongTicks.setAttribute("visibility","hidden")},Graph.prototype.showYLabels=function(show){show?this.yLabels.setAttribute("visibility","visible"):this.yLabels.setAttribute("visibility","hidden")},Graph.prototype.showCrosshairs=function(showHCrosshair,showVCrosshair
){this.showHCrosshair(showHCrosshair),this.showVCrosshair(showVCrosshair)},Graph.prototype.showHCrosshair=function(showHCrosshair){showHCrosshair?this.hCrosshair.setAttribute("visibility","visible"):this.hCrosshair.setAttribute("visibility","hidden")},Graph.prototype.showVCrosshair=function(showVCrosshair){showVCrosshair?this.vCrosshair.setAttribute("visibility","visible"):this.vCrosshair.setAttribute("visibility","hidden")},Graph.prototype.setPlottingBounds=function(xMin,xMax,yMin,yMax){this.xMin=xMin,this.xMax=xMax,this.yMin=yMin,this.yMax=yMax,this.xSpan=xMax-xMin,this.ySpan=yMax-yMin},Graph.prototype.setXAxis=function(){var xAxisClass;arguments.length===1?xAxisClass="graph-axis":arguments.length===2&&(xAxisClass=arguments[1]),this.y0=arguments[0],this.wy0=this.getyPix(this.y0),this.xAxis=U.createGroup(this.common,this.xAxis),this.yMin<=this.y0&&this.y0<=this.yMax&&(U.createLine(this.xAxis,0,this.wy0,this.width+6,this.wy0,xAxisClass),U.createLine(this.xAxis,this.width+3,this.wy0-3,this
.width+3,this.wy0+3,xAxisClass),U.createLine(this.xAxis,this.width+4,this.wy0-2,this.width+4,this.wy0+2,xAxisClass),U.createLine(this.xAxis,this.width+5,this.wy0-1,this.width+5,this.wy0+1,xAxisClass))},Graph.prototype.setXText=function(){var wx,wy,str,cssClass="graph-x-axis-text";arguments.length===1?str=arguments[0]:arguments.length===2?(str=arguments[0],this.xTextXOffset=arguments[1]):arguments.length===3&&(str=arguments[0],this.xTextXOffset=arguments[1],cssClass=arguments[2]),wx=this.width+this.xTextXOffset,wy=this.getyPix(this.y0),this.xText=U.createGroup(this.common,this.xText),this.yMin<=this.y0&&this.y0<=this.yMax&&U.createText(this.xText,wx,wy,str,cssClass)},Graph.prototype.setXGrid=function(){var x,wx;this.xGrid=U.createGroup(this.common,this.xGrid),arguments.length===1?(this.xGridStep=arguments[0],this.xGridMin=this.xMin+arguments[0],this.xGridMax=this.xMax-arguments[0]):arguments.length===3&&(this.xGridStep=arguments[0],this.xGridMin=arguments[1],this.xGridMax=arguments[2]);if(
this.xGridStep>0)for(x=this.xGridMin;x<=this.xGridMax;x+=this.xGridStep)wx=this.getxPix(x),wx>this.width&&(wx=this.width),U.createLine(this.xGrid,wx,this.height,wx,0,"graph-grid")},Graph.prototype.setXShortTicks=function(){var x,wx;this.xShortTicks=U.createGroup(this.common,this.xShortTicks),arguments.length===1?(this.xShortTickStep=arguments[0],this.xShortTickMin=this.xMin,this.xShortTickMax=this.xMax):arguments.length===3&&(this.xShortTickStep=arguments[0],this.xShortTickMin=arguments[1],this.xShortTickMax=arguments[2]);if(this.xShortTickStep>0)for(x=this.xShortTickMin;x<=this.xShortTickMax;x+=this.xShortTickStep)wx=this.getxPix(x),wx>this.width&&(wx=this.width),U.createLine(this.xShortTicks,wx,this.height,wx,this.height+2,"graph-long-ticks")},Graph.prototype.setXLongTicks=function(){var x,wx;this.xLongTicks=U.createGroup(this.common,this.xLongTicks),arguments.length===1?(this.xLongTickStep=arguments[0],this.xLongTickMin=this.xMin,this.xLongTickMax=this.xMax):arguments.length===3&&(this
.xLongTickStep=arguments[0],this.xLongTickMin=arguments[1],this.xLongTickMax=arguments[2]);if(this.xLongTickStep>0)for(x=this.xLongTickMin;x<=this.xLongTickMax;x+=this.xLongTickStep)wx=this.getxPix(x),wx>this.width&&(wx=this.width),U.createLine(this.xLongTicks,wx,this.height,wx,this.height+4,"graph-long-ticks")},Graph.prototype.setAutomaticXLabels=function(){var x,wx,wy,str;this.xLabels=U.createGroup(this.common,this.xLabels),arguments.length===2?(this.xLabelStep=arguments[0],this.xLabelDecimalDigits=arguments[1],this.xLabelMin=this.xMin,this.xLabelMax=this.xMax):arguments.length===3?(this.xLabelStep=arguments[0],this.xLabelDecimalDigits=arguments[1],this.xZeroHasDecimalPoint=arguments[2],this.xLabelMin=this.xMin,this.xLabelMax=this.xMax):arguments.length===5?(this.xLabelStep=arguments[0],this.xLabelDecimalDigits=arguments[1],this.xZeroHasDecimalPoint=arguments[2],this.xLabelMin=arguments[3],this.xLabelMax=arguments[4]):arguments.length===6&&(this.xLabelStep=arguments[0],this.xLabelDecimalDigits=
arguments[1],this.xZeroHasDecimalPoint=arguments[2],this.xLabelMin=arguments[3],this.xLabelMax=arguments[4],this.xLabelYOffset=arguments[5]),wy=this.height+this.xLabelYOffset;if(this.xLabelStep>0)for(x=this.xLabelMin;x<=this.xLabelMax;x+=this.xLabelStep)wx=this.getxPix(x),Math.abs(x)<1e-5&&this.xZeroHasDecimalPoint?str="0":str=x.toFixed(this.xLabelDecimalDigits),U.createText(this.xLabels,wx,wy,str,"graph-x-axis-labels")},Graph.prototype.setXLabels=function(){var wx,wy,str,labels,xLabel;this.xLabels=U.createGroup(this.common,this.xLabels),arguments.length===1?labels=arguments[0]:arguments.length===2&&(labels=arguments[0],this.xLabelYOffset=arguments[1]),wy=this.height+this.xLabelYOffset;for(var i=0,len=labels.length;i<len;i++)xLabel=labels[i],wx=this.getxPix(xLabel.x),U.createText(this.xLabels,wx,wy,xLabel.str,"graph-x-axis-labels")},Graph.prototype.setYAxis=function(){var yAxisClass;arguments.length===1?yAxisClass="graph-axis":arguments.length===2&&(yAxisClass=arguments[1]),this.x0=arguments
[0],this.wx0=this.getxPix(this.x0),this.yAxis=U.createGroup(this.common,this.yAxis),this.xMin<=this.x0&&this.x0<=this.xMax&&(U.createLine(this.yAxis,this.wx0,this.height,this.wx0,-6,yAxisClass),U.createLine(this.yAxis,this.wx0-3,-3,this.wx0+3,-3,yAxisClass),U.createLine(this.yAxis,this.wx0-2,-4,this.wx0+2,-4,yAxisClass),U.createLine(this.yAxis,this.wx0-1,-5,this.wx0+1,-5,yAxisClass))},Graph.prototype.setYText=function(){var wx,wy,str,cssClass="graph-y-axis-text";arguments.length===1?str=arguments[0]:arguments.length===2?(str=arguments[0],this.yTextYOffset=arguments[1]):arguments.length===3&&(str=arguments[0],this.yTextYOffset=arguments[1],cssClass=arguments[2]),wx=this.getxPix(this.x0),wy=this.yTextYOffset,this.yText=U.createGroup(this.common,this.yText),this.xMin<=this.x0&&this.x0<=this.xMax&&U.createText(this.yText,wx,wy,str,cssClass)},Graph.prototype.setYGrid=function(){var y,wy;this.yGrid=U.createGroup(this.common,this.yGrid),arguments.length===1?(this.yGridStep=arguments[0],this.yGridMin=
this.yMin+arguments[0],this.yGridMax=this.yMax-arguments[0]):arguments.length===3&&(this.yGridStep=arguments[0],this.yGridMin=arguments[1],this.yGridMax=arguments[2]);if(this.yGridStep>0)for(y=this.yGridMin;y<=this.yGridMax;y+=this.yGridStep)wy=this.getyPix(y),wy<0&&(wy=0),U.createLine(this.yGrid,0,wy,this.width,wy,"graph-grid")},Graph.prototype.setYShortTicks=function(){var y,wy;this.yShortTicks=U.createGroup(this.common,this.yShortTicks),arguments.length===1?(this.yShortTickStep=arguments[0],this.yShortTickMin=this.yMin,this.yShortTickMax=this.yMax):arguments.length===3&&(this.yShortTickStep=arguments[0],this.yShortTickMin=arguments[1],this.yShortTickMax=arguments[2]);if(this.yShortTickStep>0)for(y=this.yShortTickMin;y<=this.yShortTickMax;y+=this.yShortTickStep)wy=this.getyPix(y),wy<0&&(wy=0),U.createLine(this.yShortTicks,0,wy,-2,wy,"graph-long-ticks")},Graph.prototype.setYLongTicks=function(){var y,wy;this.yLongTicks=U.createGroup(this.common,this.yLongTicks),arguments.length===1?(this
.yLongTickStep=arguments[0],this.yLongTickMin=this.yMin,this.yLongTickMax=this.yMax):arguments.length===3&&(this.yLongTickStep=arguments[0],this.yLongTickMin=arguments[1],this.yLongTickMax=arguments[2]);if(this.yLongTickStep>0)for(y=this.yLongTickMin;y<=this.yLongTickMax;y+=this.yLongTickStep)wy=this.getyPix(y),wy<0&&(wy=0),U.createLine(this.yLongTicks,0,wy,-4,wy,"graph-long-ticks")},Graph.prototype.setAutomaticYLabels=function(){var y,wx,wy,str;this.yLabels=U.createGroup(this.common,this.yLabels),arguments.length===2?(this.yLabelStep=arguments[0],this.yLabelDecimalDigits=arguments[1],this.yLabelMin=this.yMin,this.yLabelMax=this.yMax):arguments.length===3?(this.yLabelStep=arguments[0],this.yLabelDecimalDigits=arguments[1],this.yZeroHasDecimalPoint=arguments[2],this.yLabelMin=this.yMin,this.yLabelMax=this.yMax):arguments.length===5?(this.yLabelStep=arguments[0],this.yLabelDecimalDigits=arguments[1],this.yZeroHasDecimalPoint=arguments[2],this.yLabelMin=arguments[3],this.yLabelMax=arguments
[4]):arguments.length===6&&(this.yLabelStep=arguments[0],this.yLabelDecimalDigits=arguments[1],this.yZeroHasDecimalPoint=arguments[2],this.yLabelMin=arguments[3],this.yLabelMax=arguments[4],this.yLabelXOffset=arguments[5]),wx=this.yLabelXOffset;if(this.yLabelStep>0)for(y=this.yLabelMin;y<=this.yLabelMax;y+=this.yLabelStep)wy=this.getyPix(y),Math.abs(y)<1e-5&&this.yZeroHasDecimalPoint?str="0":str=y.toFixed(this.yLabelDecimalDigits),U.createText(this.yLabels,wx,wy,str,"graph-y-axis-labels")},Graph.prototype.setYLabels=function(){var wx,wy,str,labels,yLabel;this.yLabels=U.createGroup(this.common,this.yLabels),arguments.length===1?labels=arguments[0]:arguments.length===2&&(labels=arguments[0],this.yLabelXOffset=arguments[1]),wx=this.yLabelXOffset;for(var i=0,len=labels.length;i<len;i++)yLabel=labels[i],wy=this.getyPix(yLabel.y),U.createText(this.yLabels,wx,wy,yLabel.str,"graph-y-axis-labels")},Graph.prototype.setCrosshairs=function(hasHCrosshair,hasVCrosshair){this.hasHCrosshair=hasHCrosshair
,this.hasVCrosshair=hasVCrosshair,this.hasHCrosshair&&(this.hCrosshair=U.createLine(this.crosshairs,0,100,this.width,100,"graph-crosshair"),this.showHCrosshair(!1)),this.hasVCrosshair&&(this.vCrosshair=U.createLine(this.crosshairs,100,0,100,this.height,"graph-crosshair"),this.showVCrosshair(!1)),this.hasReadout=hasHCrosshair||hasVCrosshair},Graph.prototype.setXScale=function(xScale){this.hasXScale=!0,this.xScale=xScale},Graph.prototype.setYScale=function(yScale){this.hasYScale=!0,this.yScale=yScale},Graph.prototype.getxPix=function(x){return this.width*(x-this.xMin)/this.xSpan},Graph.prototype.getyPix=function(y){return this.height*(this.yMax-y)/this.ySpan},Graph.prototype.getxFromPix=function(wx){return this.hasXScale?this.xScale*(this.xMin+this.xSpan*wx/this.width):this.xMin+this.xSpan*wx/this.width},Graph.prototype.getyFromPix=function(wy){return this.hasYScale?this.yScale*(this.yMax-this.ySpan*wy/this.height):this.yMax-this.ySpan*wy/this.height},Graph.prototype.inBounds=function(pt)
{return 0<=pt.x&&pt.x<=this.width&&0<=pt.y&&pt.y<=this.height?(this.mouseInside=!0,!0):(this.mouseInside=!1,!1)},Graph.prototype.inPlottingBounds=function(pt){if(arguments.length===1)return arguments[0].x<=this.xMax&&arguments[0].x>=this.xMin&&arguments[0].y<=this.yMax&&arguments[0].y>=this.yMin;if(arguments.length===2)return arguments[0]<=this.xMax&&arguments[0]>=this.xMin&&arguments[1]<=this.yMax&&arguments[1]>=this.yMin},Graph.prototype.clipToBounds=function(pt){pt.x<0?pt.x=0:pt.x>this.width&&(pt.x=this.width),pt.y<0?pt.y=0:pt.y>this.height&&(pt.y=this.height)},Graph.prototype.resizeBBox=function(){this.bBox.setAttribute("x",0),this.bBox.setAttribute("y",0),this.bBox.setAttribute("width",this.width),this.bBox.setAttribute("height",this.height)},Graph.prototype.bindEvents=function(){this.pointerDown=this.pointerDown.bind(this),this.pointerMove=this.pointerMove.bind(this),this.pointerUp=this.pointerUp.bind(this),this.pointerOver=this.pointerOver.bind(this),this.pointerOut=this.pointerOut
.bind(this),this.bBox.addEventListener("pointerdown",this.pointerDown),this.bBox.addEventListener("pointerover",this.pointerOver),this.bBox.addEventListener("pointerout",this.pointerOut)},Graph.prototype.pointerOver=function(event){event=event||window.event;var mpos,xm,ym;!this.isDragging&&this.hasReadout&&(this.bBox.addEventListener("pointermove",this.pointerMove,!1),mpos=this.getMousePosition(event),xm=this.getxFromPix(mpos.x),ym=this.getyFromPix(mpos.y),this.hasHCrosshair&&(this.hCrosshair.setAttribute("x1",0),this.hCrosshair.setAttribute("y1",mpos.y),this.hCrosshair.setAttribute("x2",this.width),this.hCrosshair.setAttribute("y2",mpos.y),this.showHCrosshair(!0)),this.hasVCrosshair&&(this.vCrosshair.setAttribute("x1",mpos.x),this.vCrosshair.setAttribute("y1",0),this.vCrosshair.setAttribute("x2",mpos.x),this.vCrosshair.setAttribute("y2",this.height),this.showVCrosshair(!0)),this.fireEvent("mouseover",{x:xm,y:ym,wx:mpos.x,wy:mpos.y}))},Graph.prototype.pointerDown=function(event){event=event||
window.event;var mpos=this.getMousePosition(event),xm,ym;if(this.isDragging)return;this.touchId=event.pointerId,this.hasReadout&&(this.bBox.removeEventListener("pointermove",this.pointerMove,!0),this.hasHCrosshair&&this.showHCrosshair(!1),this.hasVCrosshair&&this.showVCrosshair(!1)),this.isDragging=!0,xm=this.getxFromPix(mpos.x),ym=this.getyFromPix(mpos.y),this.fireEvent("mousedown",{x:xm,y:ym,wx:mpos.x,wy:mpos.y}),document.addEventListener("pointermove",this.pointerMove,!0),document.addEventListener("pointerup",this.pointerUp,!0),this.cancelDefaultAction(event)},Graph.prototype.pointerMove=function(event){event=event||window.event;var mpos,xm,ym;if(this.isDragging){if(event.pointerId!==this.touchId)return;mpos=this.getMousePosition(event),this.clipToBounds(mpos),xm=this.getxFromPix(mpos.x),ym=this.getyFromPix(mpos.y),this.fireEvent("mousedrag",{x:xm,y:ym,wx:mpos.x,wy:mpos.y})}else mpos=this.getMousePosition(event),xm=this.getxFromPix(mpos.x),ym=this.getyFromPix(mpos.y),this.hasHCrosshair&&
(this.hCrosshair.setAttribute("x1",0),this.hCrosshair.setAttribute("y1",mpos.y),this.hCrosshair.setAttribute("x2",this.width),this.hCrosshair.setAttribute("y2",mpos.y)),this.hasVCrosshair&&(this.vCrosshair.setAttribute("x1",mpos.x),this.vCrosshair.setAttribute("y1",0),this.vCrosshair.setAttribute("x2",mpos.x),this.vCrosshair.setAttribute("y2",this.height)),this.fireEvent("mousemove",{x:xm,y:ym,wx:mpos.x,wy:mpos.y});this.cancelDefaultAction(event)},Graph.prototype.pointerUp=function(event){event=event||window.event;var mposini,mpos,xm,ym;if(event.pointerId!==this.touchId)return;mposini=this.getMousePosition(event),mpos=this.getMousePosition(event),this.isDragging&&(this.clipToBounds(mpos),xm=this.getxFromPix(mpos.x),ym=this.getyFromPix(mpos.y),this.fireEvent("mouseup",{x:xm,y:ym,wx:mpos.x,wy:mpos.y}),document.removeEventListener("pointermove",this.pointerMove,!0),document.removeEventListener("pointerup",this.pointerUp,!0),this.isDragging=!1),this.hasReadout&&this.inBounds(mposini)&&(this
.bBox.addEventListener("pointermove",this.pointerMove,!1),xm=this.getxFromPix(mpos.x),ym=this.getyFromPix(mpos.y),this.hasHCrosshair&&(this.hCrosshair.setAttribute("x1",0),this.hCrosshair.setAttribute("y1",mpos.y),this.hCrosshair.setAttribute("x2",this.width),this.hCrosshair.setAttribute("y2",mpos.y),this.showHCrosshair(!0)),this.hasVCrosshair&&(this.vCrosshair.setAttribute("x1",mpos.x),this.vCrosshair.setAttribute("y1",0),this.vCrosshair.setAttribute("x2",mpos.x),this.vCrosshair.setAttribute("y2",this.height),this.showVCrosshair(!0)),this.fireEvent("mouseup",{x:xm,y:ym,wx:mpos.x,wy:mpos.y})),this.cancelDefaultAction(event)},Graph.prototype.pointerOut=function(event){event=event||window.event;var mpos,xm,ym;this.hasReadout&&(mpos=this.getMousePosition(event),xm=this.getxFromPix(mpos.x),ym=this.getyFromPix(mpos.y),this.hasHCrosshair&&this.showHCrosshair(!1),this.hasVCrosshair&&this.showVCrosshair(!1),this.bBox.removeEventListener("pointermove",this.pointerMove,!0),this.fireEvent("mouseout"
,{x:xm,y:ym,wx:mpos.x,wy:mpos.y}))},Graph.prototype.finalize=function(){this.addBBox(),this.resizeBBox(),this.bindEvents()},Graph}),define("hslider",["require","utils","slider"],function(require){"use strict";var U=require("utils"),Slider=require("slider");function HSlider(x,y,width,height){Slider.call(this,x,y,width,height),this.type="hslider",this.orientation="horizontal",this.labelSide="top",this.wyAxis=0,this.wyTrack=this.wyAxis+5,this.wxValue=0,this.bBoxXOffset=10,this.axis=U.createLine(this.node,0,this.wyAxis,this.width,this.wyAxis,"slider-axis"),this.darkTrack=U.createLine(this.node,0,this.wyTrack,this.width,this.wyTrack,"slider-dark-track"),this.lightTrack=U.createLine(this.node,0,this.wyTrack+2,this.width,this.wyTrack+2,"slider-light-track"),this.knob=document.createElementNS(U.SVG_NS,"g"),this.knob.setAttribute("pointer-events","visible"),this.knobLine1=U.createLine(this.knob,this.wxValue+1,this.wyTrack-1,this.wxValue+1,this.wyTrack+4,"slider-knob-body"),this.knobLine2=U.createLine
(this.knob,this.wxValue-1,this.wyTrack-1,this.wxValue-1,this.wyTrack+4,"slider-knob-body"),this.knobLine3=U.createLine(this.knob,this.wxValue,this.wyTrack-1,this.wxValue,this.wyTrack+4,"slider-knob-body"),this.knobLine4=U.createLine(this.knob,this.wxValue+2,this.wyTrack,this.wxValue+2,this.wyTrack+3,"slider-knob-body"),this.knobLine5=U.createLine(this.knob,this.wxValue-2,this.wyTrack,this.wxValue-2,this.wyTrack+3,"slider-knob-body"),this.knobPointer=U.createLine(this.knob,this.wxValue,this.wyTrack-3,this.wxValue,this.wyTrack+4,"slider-knob-pointer"),this.node.appendChild(this.knob),this.tSpans=[]}return HSlider.prototype=Object.create(Slider.prototype),HSlider.prototype.setShortTicks=function(){var x,wx;Slider.prototype.setShortTicks.apply(this,arguments),this.shortTicks=U.createGroup(this.node,this.shortTicks);if(this.shortTickStep>0)for(x=this.shortTickMin;x<=this.shortTickMax;x+=this.shortTickStep)wx=this.getxPix(x),wx>this.width&&(wx=this.width),this.labelSide==="top"?U.createLine(this
.shortTicks,wx,this.wyAxis,wx,this.wyAxis-2,"slider-short-ticks"):U.createLine(this.shortTicks,wx,this.wyAxis,wx,this.wyAxis+2,"slider-short-ticks")},HSlider.prototype.setLongTicks=function(){var x,wx;Slider.prototype.setLongTicks.apply(this,arguments),this.longTicks=U.createGroup(this.node,this.longTicks);if(this.longTickStep>0)for(x=this.longTickMin;x<=this.longTickMax;x+=this.longTickStep)wx=this.getxPix(x),wx>this.width&&(wx=this.width),this.labelSide==="top"?U.createLine(this.longTicks,wx,this.wyAxis,wx,this.wyAxis-4,"slider-long-ticks"):U.createLine(this.longTicks,wx,this.wyAxis,wx,this.wyAxis+4,"slider-long-ticks")},HSlider.prototype.setAutomaticLabels=function(){var x,wx,wy,str;Slider.prototype.setAutomaticLabels.apply(this,arguments),this.labelSide==="top"?wy=this.wyAxis+this.labelYOffset:wy=this.wyAxis-this.labelYOffset+8,this.labels=U.createGroup(this.node,this.labels);if(this.labelStep>0)for(x=this.labelMin;x<=this.labelMax;x+=this.labelStep)wx=this.getxPix(x),Math.abs(x)<1e-5&&!
this.zeroHasDecimalPoint?str="0":str=x.toFixed(this.labelDecimalDigits),U.createText(this.labels,wx,wy,str,"hslider-labels")},HSlider.prototype.setLabels=function(){var wx,wy,str,lbs,lb;arguments.length===1?lbs=arguments[0]:arguments.length===2&&(lbs=arguments[0],this.labelYOffset=arguments[1]),this.labelSide==="top"?wy=this.wyAxis+this.labelYOffset:wy=this.wyAxis-this.labelYOffset+8,this.labels=U.createGroup(this.node,this.labels);for(var i=0,len=lbs.length;i<len;i++)wx=this.getxPix(lbs[i].x),U.createText(this.labels,wx,wy,lbs[i].str,"hslider-labels")},HSlider.prototype.setText=function(){var str,cssClass;arguments.length===1?(str=arguments[0],cssClass="hslider-text"):arguments.length===2?(str=arguments[0],cssClass=arguments[1]):arguments.length===3&&(str=arguments[0],cssClass=arguments[1],this.textXOffset=arguments[2]),typeof this.text!="undefined"&&this.node.removeChild(this.text),this.text=U.createText(this.node,this.textXOffset,this.wyTrack+3,"",cssClass),this.addText(str)},HSlider
.prototype.addText=function(){var styledText=U.createStyledText(this.text,arguments[0]);arguments.length===2&&styledText.setAttribute("class",arguments[1]),styledText.setAttribute("y",this.wyTrack+3),styledText.setAttributeNS(U.XML_NS,"xml:space","preserve"),this.tSpans.push(styledText)},HSlider.prototype.addSuperScript=function(){var styledText=U.createStyledText(this.text,arguments[0]);arguments.length===2&&styledText.setAttribute("class",arguments[1]),styledText.setAttribute("dx",2),styledText.setAttribute("y",this.wyTrack+3-5),styledText.setAttributeNS(U.XML_NS,"xml:space","preserve"),this.tSpans.push(styledText)},HSlider.prototype.addSubScript=function(){var styledText=U.createStyledText(this.text,arguments[0]);arguments.length===2&&styledText.setAttribute("class",arguments[1]),styledText.setAttribute("dx",2),styledText.setAttribute("y",this.wyTrack+3+3),styledText.setAttributeNS(U.XML_NS,"xml:space","preserve"),this.tSpans.push(styledText)},HSlider.prototype.setValue=function(){var cssClass
;arguments.length===1?(this.value=arguments[0],cssClass="hslider-value-text"):arguments.length===2?(this.value=arguments[0],this.valueDecimalDigits=arguments[1],cssClass="hslider-value-text"):arguments.length===3?(this.value=arguments[0],this.valueDecimalDigits=arguments[1],cssClass=arguments[2]):arguments.length===4?(this.value=arguments[0],this.valueDecimalDigits=arguments[1],cssClass=arguments[2],this.valueHasDegree=arguments[3]):arguments.length===5&&(this.value=arguments[0],this.valueDecimalDigits=arguments[1],cssClass=arguments[2],this.valueHasDegree=arguments[3],this.valueTextXOffset=arguments[4]),typeof this.valueText=="undefined"?this.valueText=U.createText(this.node,this.width+this.valueTextXOffset,this.wyTrack+3,"",cssClass):cssClass&&this.valueText.setAttribute("class",cssClass),this.keepValueInBounds&&(this.value=this.clipToPlottingBounds(this.value)),this.wxValue=this.clipToBounds(this.getxPix(this.value)),this.updateKnobPosition(),this.updateValueText()},HSlider.prototype
.getValue=function(pt){var tick;this.isInTickZone||this.snapToTicks||this.snapToStep?(tick=this.findNearestTick(pt),this.wxValue=tick.wxValue,this.value=tick.value):(this.wxValue=pt.x,this.value=this.getxFromPix(this.wxValue)),this.wxValue=this.clipToBounds(this.wxValue),this.value=this.clipToPlottingBounds(this.value)},HSlider.prototype.getClickZone=function(pt){this.labelSide==="top"?this.isInTickZone=pt.y<=10:this.isInTickZone=pt.y>=0},HSlider.prototype.findNearestTick=function(pt){var x,wx,wxc=pt.x,currentDist,minDist=Number.MAX_VALUE,xStep,xMin,xMax,wxResult,xResult;this.longTickStep>0&&(xMin=this.longTickMin,xMax=this.longTickMax,xStep=this.longTickStep),this.shortTickStep>0&&(xMin=this.shortTickMin,xMax=this.shortTickMax,xStep=this.shortTickStep),this.snapToStep&&(xStep=this.snapStep);if(this.shortTickStep>0||this.longTickStep>0||this.snapToStep)for(x=xMin;x<=xMax;x+=xStep)wx=this.getxPix(x),currentDist=Math.abs(wxc-wx),currentDist<minDist&&(minDist=currentDist,wxResult=wx,xResult=
x);else wxResult=wxc,xResult=this.getxFromPix(wxc);return{wxValue:wxResult,value:xResult}},HSlider.prototype.updateKnobPosition=function(){this.knob.setAttribute("transform","translate("+parseInt(this.wxValue,10)+", 0)"),this.alwaysShowKnob||this.showKnob(this.value>=this.min&&this.value<=this.max)},HSlider.prototype.getxPix=function(x){return Math.round(this.width*(x-this.min)/this.span)},HSlider.prototype.getxFromPix=function(wx){return this.min+this.span*wx/this.width},HSlider.prototype.resizeBBox=function(){this.bBox.setAttribute("x",-this.bBoxXOffset),this.bBox.setAttribute("y",-15),this.bBox.setAttribute("width",this.width+this.bBoxXOffset*2),this.bBox.setAttribute("height",40)},HSlider.prototype.getMousePosition=function(event){event=event||window.event;var bcRect=this.bBox.getBoundingClientRect(),p=this.tool.svg.createSVGPoint();return p.x=Math.floor(event.clientX-bcRect.left-this.bBoxXOffset),p.y=Math.floor(event.clientY-bcRect.top),{x:p.x,y:p.y}},HSlider.prototype.finalize=function(
){this.addBBox(),this.resizeBBox(),this.bindEvents()},HSlider}),define("radiobutton",["require","utils","component"],function(require){"use strict";var U=require("utils"),Component=require("component");function RadioButton(x,y,width,height){Component.call(this,x,y,width,height),this.type="radiobutton",this.isChecked=!1,this.group=null,this.backCircle=U.createCircle(this.node,0,0,6,"radiobutton-back-circle"),this.frontCircle=U.createCircle(this.node,0,0,4,"radiobutton-front-circle"),this.isChecked?this.frontCircle.setAttribute("visibility",""):this.frontCircle.setAttribute("visibility","hidden"),this.tSpans=[],this.label=U.createText(this.node,14,6,"","radiobutton-label")}return RadioButton.prototype=Object.create(Component.prototype),RadioButton.prototype.addText=function(){var styledText=U.createStyledText(this.label,arguments[0]);arguments.length===2&&styledText.setAttribute("class",arguments[1]),this.tSpans.push(styledText)},RadioButton.prototype.setText=function(index,str){this.tSpans
[index].textContent=str},RadioButton.prototype.setClass=function(index,cssClass){this.tSpans[index].setAttribute("class",cssClass)},RadioButton.prototype.setFrontCircleClass=function(cssClass){this.frontCircle.setAttribute("class",cssClass)},RadioButton.prototype.bindEvents=function(){this.pointerDown=this.pointerDown.bind(this),this.bBox.addEventListener("pointerdown",this.pointerDown,!1)},RadioButton.prototype.setChecked=function(isChecked){this.isChecked=isChecked,isChecked?this.frontCircle.setAttribute("visibility",""):this.frontCircle.setAttribute("visibility","hidden")},RadioButton.prototype.pointerDown=function(event){event=event||window.event;if(this.group!==null){var rbs=this.group.radioButtons;for(var i=0;i<rbs.length;i++)rbs[i].setChecked(!1);this.setChecked(!0)}else this.setChecked(!this.isChecked);this.fireEvent("mousedown",this),this.cancelDefaultAction(event)},RadioButton.prototype.finalize=function(){this.addBBox(),this.bindEvents()},RadioButton}),define("radiobuttongroup"
,["require"],function(require){"use strict";function RadioButtonGroup(){this.radioButtons=Array.prototype.slice.call(arguments,0);for(var i=0;i<this.radioButtons.length;i++)this.radioButtons[i].group=this}return RadioButtonGroup.prototype.add=function(){var args=Array.prototype.slice.call(arguments,0),oldLen=this.radioButtons.length;this.radioButtons=this.radioButtons.concat(args);for(var i=oldLen;i<this.radioButtons.length;i++)this.radioButtons[i].group=this},RadioButtonGroup.prototype.remove=function(radioButton){for(var i=0;i<this.radioButtons.length;i++)this.radioButtons[i]===radioButton&&this.radioButtons.splice(i,1);radioButton.group=null},RadioButtonGroup}),define("tool",["require","utils"],function(require){"use strict";var U=require("utils");function Tool(container,width,height){this.container=container,this.width=typeof width=="undefined"?818:width,this.height=typeof height=="undefined"?575:height,this.svg=document.createElementNS(U.SVG_NS,"svg"),this.svg.setAttribute("version"
,"1.2"),this.svg.setAttribute("baseProfile","tiny"),this.svg.setAttribute("width",this.width),this.svg.setAttribute("height",this.height),this.container.appendChild(this.svg),this.components=[],this.eventListeners={},this.tool=null,this.onselectstart=function(){return!1}}return Tool.prototype.addEventListener=function(type,eventListener){type in this.eventListeners||(this.eventListeners[type]=eventListener)},Tool.prototype.removeEventListener=function(type){type in this.eventListeners&&delete this.eventListeners[type]},Tool.prototype.fireEvent=function(event,parameters){if(typeof event!="string")throw new Error("Event object missing 'type' property.");this.eventListeners[event](parameters)},Tool.prototype.add=function(comp){this.components.push(comp),comp.tool=this,this.svg.appendChild(comp.node)},Tool.prototype.remove=function(comp){var index=this.components.indexOf(comp);index>-1&&this.components.splice(index,1),U.removeChildren(comp.node),this.svg.removeChild(comp.node),comp=null},Tool
.prototype.finalize=function(){var i,len,comp;for(i=0,len=this.components.length;i<len;i++)comp=this.components[i],typeof comp.finalize=="function"?comp.finalize():console.error("Finalize has to be a method for the following subclass of component: "+comp.type)},Tool}),define("vslider",["require","utils","slider"],function(require){"use strict";var U=require("utils"),Slider=require("slider");function VSlider(x,y,width,height){Slider.call(this,x,y,width,height),this.type="vslider",this.orientation="vertical",this.labelSide="left",this.wxAxis=0,this.wxTrack=this.wxAxis+5,this.wyValue=0,this.bBoxXOffset=10,this.axis=U.createLine(this.node,this.wxAxis,0,this.wxAxis,this.height,"slider-axis"),this.darkTrack=U.createLine(this.node,this.wxTrack,0,this.wxTrack,this.height,"slider-dark-track"),this.lightTrack=U.createLine(this.node,this.wxTrack+2,0,this.wxTrack+2,this.height,"slider-light-track"),this.knob=document.createElementNS(U.SVG_NS,"g"),this.knob.setAttribute("pointer-events","visible"),this
.knobLine1=U.createLine(this.knob,this.wxTrack-1,this.wyValue+1,this.wxTrack+4,this.wyValue+1,"slider-knob-body"),this.knobLine2=U.createLine(this.knob,this.wxTrack-1,this.wyValue-1,this.wxTrack+4,this.wyValue-1,"slider-knob-body"),this.knobLine3=U.createLine(this.knob,this.wxTrack-1,this.wyValue,this.wxTrack+4,this.wyValue,"slider-knob-body"),this.knobLine4=U.createLine(this.knob,this.wxTrack,this.wyValue+2,this.wxTrack+3,this.wyValue+2,"slider-knob-body"),this.knobLine5=U.createLine(this.knob,this.wxTrack,this.wyValue-2,this.wxTrack+3,this.wyValue-2,"slider-knob-body"),this.knobPointer=U.createLine(this.knob,this.wxTrack-3,this.wyValue,this.wxTrack+4,this.wyValue,"slider-knob-pointer"),this.node.appendChild(this.knob)}return VSlider.prototype=Object.create(Slider.prototype),VSlider.prototype.setShortTicks=function(){var y,wy;Slider.prototype.setShortTicks.apply(this,arguments),this.shortTicks=U.createGroup(this.node,this.shortTicks);if(this.shortTickStep>0)for(y=this.shortTickMin;y<=this
.shortTickMax;y+=this.shortTickStep)wy=this.getyPix(y),wy<0&&(wy=0),this.labelSide==="left"?U.createLine(this.shortTicks,this.wxAxis,wy,this.wxAxis-2,wy,"slider-short-ticks"):U.createLine(this.shortTicks,this.wxAxis,wy,this.wxAxis+2,wy,"slider-short-ticks")},VSlider.prototype.setLongTicks=function(){var y,wy;Slider.prototype.setLongTicks.apply(this,arguments),this.longTicks=U.createGroup(this.node,this.longTicks);if(this.longTickStep>0)for(y=this.longTickMin;y<=this.longTickMax;y+=this.longTickStep)wy=this.getyPix(y),wy<0&&(wy=0),this.labelSide==="left"?U.createLine(this.longTicks,this.wxAxis,wy,this.wxAxis-4,wy,"slider-long-ticks"):U.createLine(this.longTicks,this.wxAxis,wy,this.wxAxis+4,wy,"slider-long-ticks")},VSlider.prototype.setAutomaticLabels=function(){var y,wx,wy,str;Slider.prototype.setAutomaticLabels.apply(this,arguments),this.labelSide==="left"?wx=this.wxAxis+this.labelXOffset:wx=this.wxAxis-this.labelXOffset,this.labels=U.createGroup(this.node,this.labels);if(this.labelStep>0
)for(y=this.labelMin;y<=this.labelMax;y+=this.labelStep)wy=this.getyPix(y),Math.abs(y)<1e-5&&!this.zeroHasDecimalPoint?str="0":str=y.toFixed(this.labelDecimalDigits),this.labelSide==="left"?U.createText(this.labels,wx,wy,str,"vslider-labels-left"):U.createText(this.labels,wx,wy,str,"vslider-labels-right")},VSlider.prototype.setLabels=function(){var wx,wy,str,lbs,lb;arguments.length===1?lbs=arguments[0]:arguments.length===2&&(lbs=arguments[0],this.labelXOffset=arguments[1]),this.labelSide==="left"?wx=this.wxAxis+this.labelXOffset:wx=this.wxAxis-this.labelXOffset,this.labels=U.createGroup(this.node,this.labels);for(var i=0,len=lbs.length;i<len;i++)wy=this.getyPix(lbs[i].y),U.createText(this.labels,wx,wy,lbs[i].str,"vslider-labels-"+this.labelSide)},VSlider.prototype.setText=function(){var str,cssClass;arguments.length===1?(str=arguments[0],cssClass="vslider-text"):arguments.length===2?(str=arguments[0],cssClass=arguments[1]):arguments.length===3&&(str=arguments[0],cssClass=arguments[1],this
.textYOffset=arguments[2]),this.text=U.createText(this.node,this.wxTrack,this.height+this.textYOffset,str,cssClass)},VSlider.prototype.setValue=function(){var cssClass;arguments.length===1?(this.value=arguments[0],cssClass="vslider-value-text"):arguments.length===2?(this.value=arguments[0],this.valueDecimalDigits=arguments[1],cssClass="vslider-value-text"):arguments.length===3?(this.value=arguments[0],this.valueDecimalDigits=arguments[1],cssClass=arguments[2]):arguments.length===4?(this.value=arguments[0],this.valueDecimalDigits=arguments[1],cssClass=arguments[2],this.valueHasDegree=arguments[3]):arguments.length===5&&(this.value=arguments[0],this.valueDecimalDigits=arguments[1],cssClass=arguments[2],this.valueHasDegree=arguments[3],this.valueTextYOffset=arguments[4]),typeof this.valueText=="undefined"&&(this.valueText=U.createText(this.node,this.wxTrack,this.valueTextYOffset,"",cssClass)),this.keepValueInBounds&&(this.value=this.clipToPlottingBounds(this.value)),this.wyValue=this.clipToBounds
(this.getyPix(this.value)),this.updateKnobPosition(),this.updateValueText()},VSlider.prototype.getValue=function(pt){var tick;this.isInTickZone||this.snapToTicks||this.snapToStep?(tick=this.findNearestTick(pt),this.wyValue=tick.wyValue,this.value=tick.value):(this.wyValue=pt.y,this.value=this.getyFromPix(this.wyValue)),this.wyValue=this.clipToBounds(this.wyValue),this.value=this.clipToPlottingBounds(this.value)},VSlider.prototype.getClickZone=function(pt){this.labelSide==="left"?pt.x<=10?this.isInTickZone=!0:this.isInTickZone=!1:pt.x>=0?this.isInTickZone=!0:this.isInTickZone=!1},VSlider.prototype.findNearestTick=function(pt){var y,wy,wyc=pt.y,currentDist,minDist=Number.MAX_VALUE,yStep,yMin,yMax,wyResult,yResult;this.longTickStep>0&&(yMin=this.longTickMin,yMax=this.longTickMax,yStep=this.longTickStep),this.shortTickStep>0&&(yMin=this.shortTickMin,yMax=this.shortTickMax,yStep=this.shortTickStep),this.snapToStep&&(yStep=this.snapStep);if(this.shortTickStep>0||this.longTickStep>0||this.snapToStep
)for(y=yMin;y<=yMax;y+=yStep)wy=this.getyPix(y),currentDist=Math.abs(wyc-wy),currentDist<minDist&&(minDist=currentDist,wyResult=wy,yResult=y);else wyResult=wyc,yResult=this.getyFromPix(wyc);return{wyValue:wyResult,value:yResult}},VSlider.prototype.updateKnobPosition=function(){this.knob.setAttribute("transform","translate(0,"+parseInt(this.wyValue,10)+")"),this.alwaysShowKnob||this.showKnob(this.value>=this.min&&this.value<=this.max)},VSlider.prototype.getyPix=function(y){return Math.round(this.height*(this.max-y)/this.span)},VSlider.prototype.getyFromPix=function(wy){return this.max-this.span*wy/this.height},VSlider.prototype.resizeBBox=function(){this.bBox.setAttribute("x",-15),this.bBox.setAttribute("y",-this.bBoxXOffset),this.bBox.setAttribute("width",40),this.bBox.setAttribute("height",this.height+this.bBoxXOffset*2)},VSlider.prototype.getMousePosition=function(event){event=event||window.event;var bcRect=this.bBox.getBoundingClientRect(),p=this.tool.svg.createSVGPoint();return p.x=
Math.floor(event.clientX-bcRect.left),p.y=Math.floor(event.clientY-bcRect.top-this.bBoxXOffset),{x:p.x,y:p.y}},VSlider.prototype.finalize=function(){this.addBBox(),this.resizeBBox(),this.bindEvents()},VSlider}),define("fourieraudio",["require","utils"],function(require){"use strict";var U=require("utils");window.AudioContext=window.AudioContext||window.webkitAudioContext,window.AudioContext.prototype.createPeriodicWave=window.AudioContext.prototype.createPeriodicWave||window.AudioContext.prototype.createWaveTable,window.OscillatorNode.prototype.setPeriodicWave=window.OscillatorNode.prototype.setPeriodicWave||window.OscillatorNode.prototype.setWaveTable;function FourierAudio(){this.frequency=440,this.volume=1,this.real=new Float32Array([0,1]),this.imaginary=new Float32Array([0,0]),this.context=arguments[0]||new window.AudioContext,arguments.length>=2&&(this.frequency=arguments[1]),arguments.length>=3&&(this.volume=arguments[2]),arguments.length>=4&&(this.real=new Float32Array(arguments[3
])),arguments.length>=5&&(this.imaginary=new Float32Array(arguments[4])),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.generateOscillator()}return FourierAudio.prototype.updatePeriodicWave=function(){this.periodicWave=this.context.createPeriodicWave(this.real,this.imaginary),this.oscillator.setPeriodicWave(this.periodicWave)},FourierAudio.prototype.generateOscillator=function(){this.oscillator=this.context.createOscillator(),this.oscillator.connect(this.gain),this.updatePeriodicWave()},FourierAudio.prototype.setFourierTerms=function(real,imaginary){this.real=new Float32Array(real),this.imaginary=new Float32Array(imaginary),this.updatePeriodicWave()},FourierAudio.prototype.setFrequency=function(frequency){this.frequency=frequency,this.oscillator.frequency.value=this.frequency},FourierAudio.prototype.setVolume=function(volume){this.volume=volume,this.gain.gain.value=this.volume},FourierAudio.prototype.play=function(){this.generateOscillator(),this.oscillator
.start(0),this.setFrequency(this.frequency)},FourierAudio.prototype.stop=function(){this.oscillator.stop(0)},FourierAudio}),define("normalcdf",[],function(){"use strict";return{"0.00":"0.5000",.01:"0.5040",.02:"0.5080",.03:"0.5120",.04:"0.5160",.05:"0.5199",.06:"0.5239",.07:"0.5279",.08:"0.5319",.09:"0.5359","0.10":"0.5398",.11:"0.5438",.12:"0.5478",.13:"0.5517",.14:"0.5557",.15:"0.5596",.16:"0.5636",.17:"0.5675",.18:"0.5714",.19:"0.5753","0.20":"0.5793",.21:"0.5832",.22:"0.5871",.23:"0.5910",.24:"0.5948",.25:"0.5987",.26:"0.6026",.27:"0.6064",.28:"0.6103",.29:"0.6141","0.30":"0.6179",.31:"0.6217",.32:"0.6255",.33:"0.6293",.34:"0.6331",.35:"0.6368",.36:"0.6406",.37:"0.6443",.38:"0.6480",.39:"0.6517","0.40":"0.6554",.41:"0.6591",.42:"0.6628",.43:"0.6664",.44:"0.6700",.45:"0.6736",.46:"0.6772",.47:"0.6808",.48:"0.6844",.49:"0.6879","0.50":"0.6915",.51:"0.6950",.52:"0.6985",.53:"0.7019",.54:"0.7054",.55:"0.7088",.56:"0.7123",.57:"0.7157",.58:"0.7190",.59:"0.7224","0.60":"0.7257",.61:"0.7291"
,.62:"0.7324",.63:"0.7357",.64:"0.7389",.65:"0.7422",.66:"0.7454",.67:"0.7486",.68:"0.7517",.69:"0.7549","0.70":"0.7580",.71:"0.7611",.72:"0.7642",.73:"0.7673",.74:"0.7704",.75:"0.7734",.76:"0.7764",.77:"0.7794",.78:"0.7823",.79:"0.7852","0.80":"0.7881",.81:"0.7910",.82:"0.7939",.83:"0.7967",.84:"0.7995",.85:"0.8023",.86:"0.8051",.87:"0.8078",.88:"0.8106",.89:"0.8133","0.90":"0.8159",.91:"0.8186",.92:"0.8212",.93:"0.8238",.94:"0.8264",.95:"0.8289",.96:"0.8315",.97:"0.8340",.98:"0.8365",.99:"0.8389","1.00":"0.8413",1.01:"0.8438",1.02:"0.8461",1.03:"0.8485",1.04:"0.8508",1.05:"0.8531",1.06:"0.8554",1.07:"0.8577",1.08:"0.8599",1.09:"0.8621","1.10":"0.8643",1.11:"0.8665",1.12:"0.8686",1.13:"0.8708",1.14:"0.8729",1.15:"0.8749",1.16:"0.8770",1.17:"0.8790",1.18:"0.8810",1.19:"0.8830","1.20":"0.8849",1.21:"0.8869",1.22:"0.8888",1.23:"0.8907",1.24:"0.8925",1.25:"0.8944",1.26:"0.8962",1.27:"0.8980",1.28:"0.8997",1.29:"0.9015","1.30":"0.9032",1.31:"0.9049",1.32:"0.9066",1.33:"0.9082",1.34:"0.9099"
,1.35:"0.9115",1.36:"0.9131",1.37:"0.9147",1.38:"0.9162",1.39:"0.9177","1.40":"0.9192",1.41:"0.9207",1.42:"0.9222",1.43:"0.9236",1.44:"0.9251",1.45:"0.9265",1.46:"0.9279",1.47:"0.9292",1.48:"0.9306",1.49:"0.9319","1.50":"0.9332",1.51:"0.9345",1.52:"0.9357",1.53:"0.9370",1.54:"0.9382",1.55:"0.9394",1.56:"0.9406",1.57:"0.9418",1.58:"0.9429",1.59:"0.9441","1.60":"0.9452",1.61:"0.9463",1.62:"0.9474",1.63:"0.9484",1.64:"0.9495",1.65:"0.9505",1.66:"0.9515",1.67:"0.9525",1.68:"0.9535",1.69:"0.9545","1.70":"0.9554",1.71:"0.9564",1.72:"0.9573",1.73:"0.9582",1.74:"0.9591",1.75:"0.9599",1.76:"0.9608",1.77:"0.9616",1.78:"0.9625",1.79:"0.9633","1.80":"0.9641",1.81:"0.9649",1.82:"0.9656",1.83:"0.9664",1.84:"0.9671",1.85:"0.9678",1.86:"0.9686",1.87:"0.9693",1.88:"0.9699",1.89:"0.9706","1.90":"0.9713",1.91:"0.9719",1.92:"0.9726",1.93:"0.9732",1.94:"0.9738",1.95:"0.9744",1.96:"0.9750",1.97:"0.9756",1.98:"0.9761",1.99:"0.9767","2.00":"0.9772",2.01:"0.9778",2.02:"0.9783",2.03:"0.9788",2.04:"0.9793",2.05:"0.9798"
,2.06:"0.9803",2.07:"0.9808",2.08:"0.9812",2.09:"0.9817","2.10":"0.9821",2.11:"0.9826",2.12:"0.9830",2.13:"0.9834",2.14:"0.9838",2.15:"0.9842",2.16:"0.9846",2.17:"0.9850",2.18:"0.9854",2.19:"0.9857","2.20":"0.9861",2.21:"0.9864",2.22:"0.9868",2.23:"0.9871",2.24:"0.9875",2.25:"0.9878",2.26:"0.9881",2.27:"0.9884",2.28:"0.9887",2.29:"0.9890","2.30":"0.9893",2.31:"0.9896",2.32:"0.9898",2.33:"0.9901",2.34:"0.9904",2.35:"0.9906",2.36:"0.9909",2.37:"0.9911",2.38:"0.9913",2.39:"0.9916","2.40":"0.9918",2.41:"0.9920",2.42:"0.9922",2.43:"0.9925",2.44:"0.9927",2.45:"0.9929",2.46:"0.9931",2.47:"0.9932",2.48:"0.9934",2.49:"0.9936","2.50":"0.9938",2.51:"0.9940",2.52:"0.9941",2.53:"0.9943",2.54:"0.9945",2.55:"0.9946",2.56:"0.9948",2.57:"0.9949",2.58:"0.9951",2.59:"0.9952","2.60":"0.9953",2.61:"0.9955",2.62:"0.9956",2.63:"0.9957",2.64:"0.9959",2.65:"0.9960",2.66:"0.9961",2.67:"0.9962",2.68:"0.9963",2.69:"0.9964","2.70":"0.9965",2.71:"0.9966",2.72:"0.9967",2.73:"0.9968",2.74:"0.9969",2.75:"0.9970",2.76:"0.9971"
,2.77:"0.9972",2.78:"0.9973",2.79:"0.9974","2.80":"0.9974",2.81:"0.9975",2.82:"0.9976",2.83:"0.9977",2.84:"0.9977",2.85:"0.9978",2.86:"0.9979",2.87:"0.9979",2.88:"0.9980",2.89:"0.9981","2.90":"0.9981",2.91:"0.9982",2.92:"0.9982",2.93:"0.9983",2.94:"0.9984",2.95:"0.9984",2.96:"0.9985",2.97:"0.9985",2.98:"0.9986",2.99:"0.9986","3.00":"0.9987",3.01:"0.9987",3.02:"0.9987",3.03:"0.9988",3.04:"0.9988",3.05:"0.9989",3.06:"0.9989",3.07:"0.9989",3.08:"0.9990",3.09:"0.9990","3.10":"0.9990",3.11:"0.9991",3.12:"0.9991",3.13:"0.9991",3.14:"0.9992",3.15:"0.9992",3.16:"0.9992",3.17:"0.9992",3.18:"0.9993",3.19:"0.9993","3.20":"0.9993",3.21:"0.9993",3.22:"0.9994",3.23:"0.9994",3.24:"0.9994",3.25:"0.9994",3.26:"0.9994",3.27:"0.9995",3.28:"0.9995",3.29:"0.9995","3.30":"0.9995",3.31:"0.9995",3.32:"0.9995",3.33:"0.9996",3.34:"0.9996",3.35:"0.9996",3.36:"0.9996",3.37:"0.9996",3.38:"0.9996",3.39:"0.9997","3.40":"0.9997",3.41:"0.9997",3.42:"0.9997",3.43:"0.9997",3.44:"0.9997",3.45:"0.9997",3.46:"0.9997",3.47:"0.9998"
,3.48:"0.9998",3.49:"0.9998","3.50":"0.9998",3.51:"0.9998",3.52:"0.9998",3.53:"0.9998",3.54:"0.9998",3.55:"0.9998",3.56:"0.9998",3.57:"0.9998",3.58:"0.9998",3.59:"0.9998","3.60":"0.9998",3.61:"0.9998",3.62:"0.9999",3.63:"0.9999",3.64:"0.9999",3.65:"0.9999",3.66:"0.9999",3.67:"0.9999",3.68:"0.9999",3.69:"0.9999","3.70":"0.9999",3.71:"0.9999",3.72:"0.9999",3.73:"0.9999",3.74:"0.9999",3.75:"0.9999",3.76:"0.9999",3.77:"0.9999",3.78:"0.9999",3.79:"0.9999","3.80":"0.9999",3.81:"0.9999",3.82:"0.9999",3.83:"0.9999",3.84:"0.9999",3.85:"0.9999",3.86:"0.9999",3.87:"0.9999",3.88:"0.9999",3.89:"0.9999","3.90":"1.0000",3.91:"1.0000",3.92:"1.0000",3.93:"1.0000",3.94:"1.0000",3.95:"1.0000",3.96:"1.0000",3.97:"1.0000",3.98:"1.0000",3.99:"1.0000","4.00":"1.0000"}}),define("edxintegration",["require","jschannel"],function(require){"use strict";var Channel=require("jschannel");function createChannel(getGrade,getState,setState){var channel,msg="The application is not embedded in an iframe. A channel could not be established"
;window.parent!==window?(channel=Channel.build({window:window.parent,origin:"*",scope:"JSInput"}),channel.bind("getGrade",getGrade),channel.bind("getState",getState),channel.bind("setState",setState)):console.log(msg)}return{createChannel:createChannel}}),define("arc",["require","utils"],function(require){"use strict";var U=require("utils");function Arc(graph,xc,yc,radius,startAngle,endAngle,inDegrees,clockwise,cssClass){this.graph=graph,this.xc=xc,this.yc=yc,this.radius=radius,this.inDegrees=inDegrees,this.clockwise=clockwise,this.convertAngles(startAngle,endAngle),this.arc=document.createElementNS(U.SVG_NS,"path"),this.setdAttribute(),this.setClass(cssClass),this.graph.shapes.appendChild(this.arc)}return Arc.prototype.convertAngles=function(startAngle,endAngle){this.inDegrees?(this.startAngle=U.degToRad(startAngle),this.endAngle=U.degToRad(endAngle)):(this.startAngle=startAngle,this.endAngle=endAngle)},Arc.prototype.setXY=function(xc,yc){this.xc=xc,this.yc=yc,this.setTransform()},Arc.
prototype.setAngles=function(){var startAngle,endAngle;arguments.length===2?(startAngle=arguments[0],endAngle=arguments[1]):arguments.length===3&&(startAngle=arguments[0],endAngle=arguments[1],this.clockwise=arguments[2]),this.convertAngles(startAngle,endAngle),this.setdAttribute()},Arc.prototype.setRadius=function(radius){this.radius=radius,this.setdAttribute()},Arc.prototype.setdAttribute=function(){var wxs,wys,wxe,wye,largeArcFlag,sweepFlag,dAngle,str;wxs=this.graph.getxPix(this.xc)+Math.round(this.radius*Math.cos(this.startAngle)),wys=this.graph.getyPix(this.yc)-Math.round(this.radius*Math.sin(this.startAngle)),wxe=this.graph.getxPix(this.xc)+Math.round(this.radius*Math.cos(this.endAngle)),wye=this.graph.getyPix(this.yc)-Math.round(this.radius*Math.sin(this.endAngle)),dAngle=this.endAngle-this.startAngle,this.clockwise?dAngle<Math.PI?(largeArcFlag="1,",sweepFlag="1,"):(largeArcFlag="0,",sweepFlag="1,"):dAngle<Math.PI?(largeArcFlag="0,",sweepFlag="0,"):(largeArcFlag="1,",sweepFlag="0,"
),str="0,"+largeArcFlag+sweepFlag,this.arc.setAttribute("d","M "+parseInt(wxs)+","+parseInt(wys)+"A "+parseInt(this.radius)+","+parseInt(this.radius)+","+str+parseInt(wxe)+","+parseInt(wye))},Arc.prototype.setClass=function(cssClass){this.arc.setAttribute("class",cssClass)},Arc.prototype.setVisibility=function(bool){bool?this.arc.setAttribute("visibility",""):this.arc.setAttribute("visibility","hidden")},Arc}),define("arcarrow",["require","utils"],function(require){"use strict";var U=require("utils");function Arcarrow(graph,xc,yc,radius,startAngle,endAngle,inDegrees,clockwise,cssClassArc,cssClassHead){this.graph=graph,this.xc=xc,this.yc=yc,this.radius=radius,this.inDegrees=inDegrees,this.clockwise=clockwise,this.convertAngles(startAngle,endAngle),this.arc=document.createElementNS(U.SVG_NS,"path"),this.graph.shapes.appendChild(this.arc),this.headBase=5,this.headHeight=10,this.head=document.createElementNS(U.SVG_NS,"path"),this.head.setAttribute("clip-path","url(#"+this.graph.clipPath+")"
),this.graph.shapes.appendChild(this.head),this.setXY(xc,yc),this.setClass(cssClassArc,cssClassHead),this.alwaysShowHead=!1}return Arcarrow.prototype.convertAngles=function(startAngle,endAngle){this.inDegrees?(this.startAngle=U.degToRad(startAngle),this.endAngle=U.degToRad(endAngle)):(this.startAngle=startAngle,this.endAngle=endAngle)},Arcarrow.prototype.setClass=function(cssClassArc,cssClassHead){this.arc.setAttribute("class",cssClassArc),this.head.setAttribute("class",cssClassHead)},Arcarrow.prototype.setXY=function(xc,yc){this.xc=xc,this.yc=yc,this.setdAttribute()},Arcarrow.prototype.setdAttribute=function(){var cs=Math.cos(this.startAngle),ss=Math.sin(this.startAngle),ce=Math.cos(this.endAngle),se=Math.sin(this.endAngle),wxs,wys,wxe,wye,wx1,wx2,wy1,wy2,largeArcFlag,sweepFlag,dAngle,str,oper;wxs=this.graph.getxPix(this.xc)+Math.round(this.radius*cs),wys=this.graph.getyPix(this.yc)-Math.round(this.radius*ss),wxe=this.graph.getxPix(this.xc)+Math.round(this.radius*ce),wye=this.graph.getyPix
(this.yc)-Math.round(this.radius*se),dAngle=Math.abs(this.endAngle-this.startAngle),this.clockwise?dAngle>Math.PI?(largeArcFlag="1,",sweepFlag="1,"):(largeArcFlag="0,",sweepFlag="1,"):dAngle<Math.PI?(largeArcFlag="0,",sweepFlag="0,"):(largeArcFlag="1,",sweepFlag="0,"),str="0,"+largeArcFlag+sweepFlag,this.arc.setAttribute("d","M "+parseInt(wxs)+","+parseInt(wys)+"A "+parseInt(this.radius)+","+parseInt(this.radius)+","+str+parseInt(wxe)+","+parseInt(wye)),this.clockwise?oper=-1:oper=1,wx1=Math.round(ce*-this.headBase+oper*se*this.headHeight+wxe),wy1=Math.round(-se*-this.headBase+oper*ce*this.headHeight+wye),wx2=Math.round(ce*this.headBase+oper*se*this.headHeight+wxe),wy2=Math.round(-se*this.headBase+oper*ce*this.headHeight+wye);var dist=Math.sqrt(Math.pow(wxe-wxs,2)+Math.pow(wye-wys,2));dist>=this.headHeight||largeArcFlag==="1,"||this.alwaysShowHead?this.head.setAttribute("d","M "+parseInt(wxe)+" "+parseInt(wye)+"L "+parseInt(wx1)+" "+parseInt(wy1)+" "+parseInt(wx2)+" "+parseInt(wy2)+" "+
parseInt(wxe)+" "+parseInt(wye)):this.head.setAttribute("d","M "+parseInt(wxe)+" "+parseInt(wye))},Arcarrow.prototype.setHead=function(headBase,headHeight){this.headBase=headBase,this.headHeight=headHeight,this.setdAttribute()},Arcarrow.prototype.setAngles=function(){var startAngle,endAngle;arguments.length===2?(startAngle=arguments[0],endAngle=arguments[1]):arguments.length===3&&(startAngle=arguments[0],endAngle=arguments[1],this.clockwise=arguments[2]),this.convertAngles(startAngle,endAngle),this.setdAttribute()},Arcarrow.prototype.setRadius=function(radius){this.radius=radius,this.setdAttribute()},Arcarrow.prototype.setVisibility=function(bool){bool?(this.arc.setAttribute("visibility",""),this.head.setAttribute("visibility","")):(this.arc.setAttribute("visibility","hidden"),this.head.setAttribute("visibility","hidden"))},Arcarrow.prototype.setClipPath=function(){this.clipPath=U.createClipPath(this.graph.node,-this.headBase,-this.headBase,this.graph.width+2*this.headBase,this.graph.height+2*
this.headBase),this.head.setAttribute("clip-path","url(#"+this.clipPath+")")},Arcarrow}),define("arrow",["require","utils"],function(require){"use strict";var U=require("utils");function Arrow(graph,x1,y1,x2,y2,cssClass){this.graph=graph,this.line=document.createElementNS(U.SVG_NS,"line"),this.line.setAttribute("clip-path","url(#"+this.graph.clipPath+")"),this.graph.shapes.appendChild(this.line),this.headBase=5,this.headHeight=10,this.head=document.createElementNS(U.SVG_NS,"path"),this.head.setAttribute("clip-path","url(#"+this.graph.clipPath+")"),this.graph.shapes.appendChild(this.head),this.setXY(x1,y1,x2,y2),this.setClass(cssClass),this.alwaysShowHead=!1}return Arrow.prototype.setXY=function(x1,y1,x2,y2){var wx1=this.graph.getxPix(x1),wy1=this.graph.getyPix(y1),wx2=this.graph.getxPix(x2),wy2=this.graph.getyPix(y2);this.line.setAttribute("x1",wx1),this.line.setAttribute("y1",wy1),this.line.setAttribute("x2",wx2),this.line.setAttribute("y2",wy2);var wxv=wx2-wx1,wyv=wy2-wy1,ang=-(Math.PI/2+
Math.atan2(wyv,wxv)),c=Math.cos(ang),s=Math.sin(ang),wx3=Math.round(c*-this.headBase+s*this.headHeight+wx2),wy3=Math.round(-s*-this.headBase+c*this.headHeight+wy2),wx4=Math.round(c*this.headBase+s*this.headHeight+wx2),wy4=Math.round(-s*this.headBase+c*this.headHeight+wy2),dist=Math.sqrt(Math.pow(wx2-wx1,2)+Math.pow(wy2-wy1,2));dist>=this.headHeight||this.alwaysShowHead?this.head.setAttribute("d","M "+parseInt(wx2)+" "+parseInt(wy2)+"L "+parseInt(wx3)+" "+parseInt(wy3)+" "+parseInt(wx4)+" "+parseInt(wy4)+" "+parseInt(wx2)+" "+parseInt(wy2)):this.head.setAttribute("d","M "+parseInt(wx2)+" "+parseInt(wy2))},Arrow.prototype.setHead=function(headBase,headHeight){this.headBase=headBase,this.headHeight=headHeight},Arrow.prototype.setClass=function(cssClass){this.line.setAttribute("class",cssClass),this.head.setAttribute("class",cssClass)},Arrow.prototype.setVisibility=function(bool){bool?(this.line.setAttribute("visibility",""),this.head.setAttribute("visibility","")):(this.line.setAttribute("visibility"
,"hidden"),this.head.setAttribute("visibility","hidden"))},Arrow.prototype.setClipPath=function(){this.clipPath=U.createClipPath(this.graph.node,-this.headBase,-this.headBase,this.graph.width+2*this.headBase,this.graph.height+2*this.headBase),this.head.setAttribute("clip-path","url(#"+this.clipPath+")")},Arrow}),define("cross",["require","utils"],function(require){"use strict";var U=require("utils");function Cross(graph,x,y,radius,thickness,cssClass){this.graph=graph,this.radius=radius,this.thickness=thickness,this.cross=document.createElementNS(U.SVG_NS,"path"),this.clipPath=U.createClipPath(this.graph.node,-radius,-radius,this.graph.width+2*radius,this.graph.height+2*radius),this.cross.setAttribute("clip-path","url(#"+this.clipPath+")"),this.setXY(x,y),this.setClass(cssClass),this.graph.shapes.appendChild(this.cross)}return Cross.prototype.setXY=function(x,y){var wxc,wyc;this.graph.inPlottingBounds(x,y)||(x+=2*this.radius,y+=2*this.radius),wxc=this.graph.getxPix(x),wyc=this.graph.getyPix
(y),this.cross.setAttribute("d","M "+parseInt(wxc-this.radius)+" "+parseInt(wyc-this.thickness)+" "+"L "+parseInt(wxc-this.radius)+" "+parseInt(wyc+this.thickness)+" "+"L "+parseInt(wxc-this.thickness)+" "+parseInt(wyc+this.thickness)+" "+"L "+parseInt(wxc-this.thickness)+" "+parseInt(wyc+this.radius)+" "+"L "+parseInt(wxc+this.thickness)+" "+parseInt(wyc+this.radius)+" "+"L "+parseInt(wxc+this.thickness)+" "+parseInt(wyc+this.thickness)+" "+"L "+parseInt(wxc+this.radius)+" "+parseInt(wyc+this.thickness)+" "+"L "+parseInt(wxc+this.radius)+" "+parseInt(wyc-this.thickness)+" "+"L "+parseInt(wxc+this.thickness)+" "+parseInt(wyc-this.thickness)+" "+"L "+parseInt(wxc+this.thickness)+" "+parseInt(wyc-this.radius)+" "+"L "+parseInt(wxc-this.thickness)+" "+parseInt(wyc-this.radius)+" "+"L "+parseInt(wxc-this.thickness)+" "+parseInt(wyc-this.thickness)+" "+"Z")},Cross.prototype.setClass=function(cssClass){this.cross.setAttribute("class",cssClass)},Cross.prototype.setVisibility=function(bool){bool?
this.cross.setAttribute("visibility",""):this.cross.setAttribute("visibility","hidden")},Cross}),define("curve",["require","utils"],function(require){"use strict";var U=require("utils");function Curve(){this.polyline=document.createElementNS(U.SVG_NS,"polyline"),this.graph=arguments[0],arguments.length===3?(this.setPoints(arguments[1]),this.polyline.setAttribute("class",arguments[2])):arguments.length===4?(this.setPoints(arguments[1],arguments[2]),this.polyline.setAttribute("class",arguments[3])):arguments.length===5&&(this.setPoints(arguments[1],arguments[2],arguments[3]),this.polyline.setAttribute("class",arguments[4])),this.polyline.setAttribute("clip-path","url(#"+this.graph.clipPath+")"),this.graph.shapes.appendChild(this.polyline),this.isArea=!1}return Curve.prototype.setPoints=function(){var points=[],i,len;if(arguments.length===1){var pts=arguments[0];for(i=0,len=pts.length;i<len;i+=2)points.push(this.graph.getxPix(pts[i])),points.push(this.graph.getyPix(pts[i+1]))}else if(arguments
.length===2){var xarr=arguments[0],yarr=arguments[1];for(i=0,len=xarr.length;i<len;i++)points.push(this.graph.getxPix(xarr[i])),points.push(this.graph.getyPix(yarr[i]))}else if(arguments.length===3){var x,y,wx,wy,f=arguments[0],wxlow=this.graph.getxPix(arguments[1]),wxhigh=this.graph.getxPix(arguments[2]);this.isArea&&(points.push(wxlow),points.push(this.graph.getyPix(0))),x=arguments[1],wx=this.graph.getxPix(x),this.graph.hasXScale&&(x*=this.graph.xScale),y=f(x),isFinite(y)&&(wy=this.graph.getyPix(y),points.push(wx),points.push(wy));while(wx<wxhigh)wx=Math.min(wx+1,wxhigh),x=this.graph.getxFromPix(wx),y=f(x),isFinite(y)&&(wy=this.graph.getyPix(y),points.push(wx),points.push(wy));this.isArea&&(points.push(wxhigh),points.push(this.graph.getyPix(0)))}this.polyline.setAttribute("points",points.join(","))},Curve.prototype.setClass=function(cssClass){this.polyline.setAttribute("class",cssClass)},Curve.prototype.translate=function(x,y){this.polyline.setAttribute("transform","translate("+parseInt
(this.graph.getxPix(x)-this.graph.getxPix(0))+","+parseInt(this.graph.getyPix(y)-this.graph.getyPix(0))+")")},Curve.prototype.setVisibility=function(bool){bool?this.polyline.setAttribute("visibility",""):this.polyline.setAttribute("visibility","hidden")},Curve}),define("diamond",["require","utils"],function(require){"use strict";var U=require("utils");function Diamond(graph,x,y,radius,cssClass){this.graph=graph,this.radius=radius,this.point=document.createElementNS(U.SVG_NS,"path"),this.clipPath=U.createClipPath(this.graph.node,-radius,-radius,this.graph.width+2*radius,this.graph.height+2*radius),this.point.setAttribute("clip-path","url(#"+this.clipPath+")"),this.setXY(x,y),this.setClass(cssClass),this.graph.shapes.appendChild(this.point)}return Diamond.prototype.setXY=function(x,y){var wxc,wyc,diameter=2.5*this.radius;wxc=this.graph.getxPix(x),wyc=this.graph.getyPix(y),this.graph.inPlottingBounds(x,y)||(wxc<this.graph.getxPix(this.graph.xMin)?wxc-=diameter:wxc>this.graph.getxPix(this.graph
.xMax)?wxc+=diameter:wyc<this.graph.getyPix(this.graph.yMin)?wyc-=diameter:wyc>this.graph.getyPix(this.graph.yMax)&&(wyc+=diameter)),this.point.setAttribute("d","M "+parseInt(wxc-this.radius)+" "+parseInt(wyc)+" "+"L "+parseInt(wxc)+" "+parseInt(wyc-this.radius)+" "+"L "+parseInt(wxc+this.radius)+" "+parseInt(wyc)+" "+"L "+" "+parseInt(wxc)+" "+parseInt(wyc+this.radius)+" "+"Z")},Diamond.prototype.setClass=function(cssClass){this.point.setAttribute("class",cssClass)},Diamond.prototype.setVisibility=function(bool){bool?this.point.setAttribute("visibility",""):this.point.setAttribute("visibility","hidden")},Diamond}),define("line",["require","utils"],function(require){"use strict";var U=require("utils");function Line(graph,x1,y1,x2,y2,cssClass){this.graph=graph,this.line=document.createElementNS(U.SVG_NS,"line"),this.line.setAttribute("clip-path","url(#"+this.graph.clipPath+")"),this.setXY(x1,y1,x2,y2),this.setClass(cssClass),this.graph.shapes.appendChild(this.line)}return Line.prototype.
setXY=function(x1,y1,x2,y2){this.line.setAttribute("x1",this.graph.getxPix(x1)),this.line.setAttribute("y1",this.graph.getyPix(y1)),this.line.setAttribute("x2",this.graph.getxPix(x2)),this.line.setAttribute("y2",this.graph.getyPix(y2))},Line.prototype.setClass=function(cssClass){this.line.setAttribute("class",cssClass)},Line.prototype.setVisibility=function(bool){bool?this.line.setAttribute("visibility",""):this.line.setAttribute("visibility","hidden")},Line}),define("point",["require","utils"],function(require){"use strict";var U=require("utils");function Point(graph,x,y,radius,cssClass){this.graph=graph,this.point=document.createElementNS(U.SVG_NS,"circle"),this.clipPath=U.createClipPath(this.graph.node,-radius,-radius,this.graph.width+2*radius,this.graph.height+2*radius),this.point.setAttribute("clip-path","url(#"+this.clipPath+")"),this.setXY(x,y),this.setRadius(radius),this.setClass(cssClass),this.graph.shapes.appendChild(this.point)}return Point.prototype.setXY=function(x,y){var wxc
,wyc,diameter=2.5*this.point.getAttribute("r");wxc=this.graph.getxPix(x),wyc=this.graph.getyPix(y),this.graph.inPlottingBounds(x,y)||(wxc<this.graph.getxPix(this.graph.xMin)?wxc-=diameter:wxc>this.graph.getxPix(this.graph.xMax)?wxc+=diameter:wyc<this.graph.getyPix(this.graph.yMin)?wyc-=diameter:wyc>this.graph.getyPix(this.graph.yMax)&&(wyc+=diameter)),this.point.setAttribute("cx",wxc),this.point.setAttribute("cy",wyc)},Point.prototype.setRadius=function(radius){this.point.setAttribute("r",radius)},Point.prototype.setClass=function(cssClass){this.point.setAttribute("class",cssClass)},Point.prototype.setVisibility=function(bool){bool?this.point.setAttribute("visibility",""):this.point.setAttribute("visibility","hidden")},Point}),define("polygon",["require","utils"],function(require){"use strict";var U=require("utils");function Polygon(){this.polygon=document.createElementNS(U.SVG_NS,"polygon"),this.graph=arguments[0],arguments.length===3?(this.setPoints(arguments[1]),this.polygon.setAttribute
("class",arguments[2])):arguments.length===4?(this.setPoints(arguments[1],arguments[2]),this.polygon.setAttribute("class",arguments[3])):arguments.length===5&&(this.setPoints(arguments[1],arguments[2],arguments[3]),this.polygon.setAttribute("class",arguments[4])),this.polygon.setAttribute("clip-path","url(#"+this.graph.clipPath+")"),this.graph.shapes.appendChild(this.polygon)}return Polygon.prototype.setPoints=function(){var points=[],i,len;if(arguments.length===1){var pts=arguments[0];for(i=0,len=pts.length;i<len;i+=2)points.push(this.graph.getxPix(pts[i])),points.push(this.graph.getyPix(pts[i+1]))}else if(arguments.length===2){var xarr=arguments[0],yarr=arguments[1];for(i=0,len=xarr.length;i<len;i++)points.push(this.graph.getxPix(xarr[i])),points.push(this.graph.getyPix(yarr[i]))}this.polygon.setAttribute("points",points.join(","))},Polygon.prototype.setClass=function(cssClass){this.polygon.setAttribute("class",cssClass)},Polygon.prototype.translate=function(x,y){this.polygon.setAttribute
("transform","translate("+parseInt(this.graph.getxPix(x)-this.graph.getxPix(0))+","+parseInt(this.graph.getyPix(y)-this.graph.getyPix(0))+")")},Polygon.prototype.setVisibility=function(bool){bool?this.polygon.setAttribute("visibility",""):this.polygon.setAttribute("visibility","hidden")},Polygon}),define("rectangle",["require","utils"],function(require){"use strict";var U=require("utils");function Rectangle(){arguments.length===6?(this.graph=arguments[0],this.rectangle=document.createElementNS(U.SVG_NS,"rect"),this.type="bottom-left",this.setRectangle(arguments[1],arguments[2],arguments[3],arguments[4]),this.setClass(arguments[5]),this.width=arguments[3],this.height=arguments[4]):arguments.length===7&&(this.graph=arguments[0],this.rectangle=document.createElementNS(U.SVG_NS,"rect"),this.type=arguments[6],this.setRectangle(arguments[1],arguments[2],arguments[3],arguments[4]),this.setClass(arguments[5]),this.width=arguments[3],this.height=arguments[4]),this.rectangle.setAttribute("clip-path"
,"url(#"+this.graph.clipPath+")"),this.graph.shapes.appendChild(this.rectangle)}return Rectangle.prototype.setRectangle=function(x,y,width,height){this.type==="bottom-left"?(this.rectangle.setAttribute("x",this.graph.getxPix(x)),this.rectangle.setAttribute("y",this.graph.getyPix(y+height)),this.rectangle.setAttribute("width",this.graph.getxPix(x+width)-this.graph.getxPix(x)),this.rectangle.setAttribute("height",this.graph.getyPix(y)-this.graph.getyPix(y+height))):this.type==="center"&&(this.rectangle.setAttribute("x",this.graph.getxPix(x-width/2)),this.rectangle.setAttribute("y",this.graph.getyPix(y+height/2)),this.rectangle.setAttribute("width",this.graph.getxPix(x+width/2)-this.graph.getxPix(x-width/2)),this.rectangle.setAttribute("height",this.graph.getyPix(y-height/2)-this.graph.getyPix(y+height/2)))},Rectangle.prototype.setXY=function(x,y){this.type==="bottom-left"?(this.rectangle.setAttribute("x",this.graph.getxPix(x)),this.rectangle.setAttribute("y",this.graph.getyPix(y+this.height
))):this.type==="center"&&(this.rectangle.setAttribute("x",this.graph.getxPix(x-this.width/2)),this.rectangle.setAttribute("y",this.graph.getyPix(y+this.height/2)))},Rectangle.prototype.setClass=function(cssClass){this.rectangle.setAttribute("class",cssClass)},Rectangle.prototype.setVisibility=function(bool){bool?this.rectangle.setAttribute("visibility",""):this.rectangle.setAttribute("visibility","hidden")},Rectangle});