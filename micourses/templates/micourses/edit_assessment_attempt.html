{% extends "micourses/course_base.html" %}
{% load mi_tags testing_tags course_tags %}
{% block nolinksection %}{% endblock %}
{% block title %}Grades for {{course}}{%endblock%}

{% block coursebreadcrumb %} ► <a href="{% url 'micourses:instructorgradebook' %}">Gradebook</a> ► <a href="{% url 'micourses:editassessmentattempt' content.id%}">{{assessment}}</a>{% endblock %}


{% block main_columns %}

<h4>Edit attempts for: {{assessment}}</h4>

<p>Total points: {{content.total_points}}</p>

<div class="error">{{error_message}}</div><div class="info">{{status_message}}</div>


<div style="overflow: auto;">
<form id="edit_student_content_attempts_form" action=
"{% url 'micourses:addnewassessmentattempt' content.id %}" method="post">{% csrf_token%}<input type="hidden" name="content_id" value="{{content.id}}">
<table class="bordertable">
<thead><tr><th>Name</th><th>Score</th><th>Number Attempts</th><th>New Attempt</th><th>Due Date</th></tr></thead>
<tbody>
  {% for attempt in latest_attempts %}
  <tr><td style="white-space: nowrap; padding-right: 1em;">{{attempt.student.get_full_name}} (<a href="{% url 'micourses:assessmentattemptedinstructor' attempt.student.id content.id %}">edit all attempts</a>)</td><td id="{{attempt.student.id}}_current_score">{{attempt.current_score|floatformat_or_dash:"1"}}</td><td>{{attempt.number_attempts}}</td><td><input type="text" name="{{attempt.student.id}}_new" id="id_{{attempt.student.id}}_new" size="1" {{attempt.old_value_string}}><div id="{{attempt.student.id}}_new_status" class="info">{{attempt.status}}</div><div id="{{attempt.student.id}}_new_errors" class="error">{{attempt.error}}</div></td><td>{{attempt.adjusted_due_date}}</td></tr>
  {% endfor %}
<tr><td></td><td></td><td></td><td>Date/time: <input type="text" name="new_datetime" size="10"><br/>Enter as: 8/27/15 14:00<div id="datetime_errors" class="error">{{datetime_error}}</div><input type="submit" id="add_new_attempts_button" value="Add new attempts"></td></tr>
</tbody>
</table>
</form>
</div>
{% endblock %}

